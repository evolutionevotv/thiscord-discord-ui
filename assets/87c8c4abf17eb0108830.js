(this.webpackJsonp=this.webpackJsonp||[]).push([[31],{10520:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=(r=n(57))&&r.__esModule?r:{default:r},o=n(693);var i={dump:function(e){var t;performance.memory&&(t={jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize});var n={browser:{name:a.default.name,version:a.default.version},os:{name:a.default.os.family,version:a.default.os.version},memory:t};e(n)},getTimeSinceNavigationStart:function(){return Date.now()-o.navigationStart}};t.default=i},10521:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=g(n(0)),o=h(n(57)),i=h(n(4)),u=h(n(319)),l=h(n(8573)),s=n(5048),f=h(n(10)),d=g(n(413)),c=n(1),p=h(n(7)),v=h(n(401));function h(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function g(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function _(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}i.default.initialize();var E=_(d.AuthSpinner,{}),y=function(e){var t,r;function a(){return e.apply(this,arguments)||this}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=a.prototype;return i.componentDidMount=function(){var e=(0,l.default)(this.props.location);null!=e&&u.default.authorizeIPAddress(e),(0,s.trackAppUIViewed)("authorize_ip")},i.renderLoginButton=function(){if("Android"===o.default.os.family||"iOS"===o.default.os.family)return null;var e=this.props.transitionTo;return _(d.Button,{onClick:function(){return e(c.Routes.LOGIN)}},void 0,p.default.Messages.LOGIN)},i.renderFailed=function(){return _(d.default,{},void 0,_("img",{alt:"",src:n(10522),className:v.default.marginBottom20}),_(d.Title,{className:v.default.marginBottom8},void 0,p.default.Messages.AUTHORIZATION_EXPIRED),_(d.SubTitle,{className:v.default.marginBottom40},void 0,p.default.Messages.AUTH_EXPIRED_SUGGESTION),this.renderLoginButton())},i.renderSucceeded=function(){return _(d.default,{},void 0,_("img",{alt:"",src:n(10523),className:v.default.marginBottom20}),_(d.Title,{className:v.default.marginBottom8},void 0,p.default.Messages.IP_AUTHORIZATION_SUCCEEDED),_(d.SubTitle,{className:v.default.marginBottom40},void 0,p.default.Messages.AUTH_IP_AUTH_SUCCEEDED_SUGGESTION),this.renderLoginButton())},i.renderDefault=function(){return _(d.default,{},void 0,E,_(d.Title,{},void 0,p.default.Messages.AUTHORIZING))},i.render=function(){var e=this.props,t=e.verifyFailed,n=e.verifySucceeded;return t?this.renderFailed():n?this.renderSucceeded():this.renderDefault()},a}(a.PureComponent);y.displayName="AuthorizeIPAddress",y.defaultProps={transitionTo:function(t){return e.location.assign(t)}};var I=i.default.connectStores([f.default],(function(){return{verifyFailed:f.default.didVerifyFail(),verifySucceeded:f.default.didVerifySucceed()}}))(y);t.default=I}).call(this,n(35))},10522:function(e,t,n){e.exports=n.p+"5ed6422f4a60342227db5d2678ecf911.svg"},10523:function(e,t,n){e.exports=n.p+"004dd8db75dd498bf03f6b0e7fcb51fd.svg"},10524:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=_(n(0)),o=n(5046),i=m(n(4)),u=m(n(9)),l=m(n(8573)),s=n(5048),f=m(n(143)),d=m(n(5263)),c=_(n(413)),p=n(1),v=m(n(7)),h=m(n(401));function m(e){return e&&e.__esModule?e:{default:e}}function g(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}function _(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=g();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function E(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}i.default.initialize();var y=E(c.default,{},void 0,E(c.AuthSpinner,{})),I=function(e){var t,r;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={busy:!0,success:!1,user:null},t}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=a.prototype;return i.componentDidMount=function(){var e=this,t=(0,l.default)(this.props.location),n=(0,o.parse)(this.props.location.search);u.default.post({url:p.Endpoints.DISABLE_EMAIL_NOTIFICATIONS,body:{token:t,pixel_uuid:n.hash},oldFormErrors:!0}).then((function(t){var n=t.body.user,r=new f.default(n);e.setState({success:!0,busy:!1,user:r})}),(function(){return e.setState({success:!1,busy:!1})})),(0,s.trackAppUIViewed)("disable_email_notifications")},i.renderBusy=function(){return y},i.renderSuccess=function(){var e=this.props,t=e.defaultRoute,n=e.transitionTo,r=this.state.user;return E(c.default,{},void 0,E(c.Avatar,{src:r?r.getAvatarURL():null,size:c.Avatar.Sizes.DEPRECATED_SIZE_100,className:h.default.marginBottom20}),E(c.Title,{className:h.default.marginBottom8},void 0,v.default.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_SUCCESS_HEADER),E(c.SubTitle,{},void 0,v.default.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_SUCCESS_BODY),E(c.Button,{className:h.default.marginTop40,onClick:function(){return n(t)}},void 0,v.default.Messages.CONTINUE_TO_WEBAPP))},i.renderError=function(){var e=this.props,t=e.defaultRoute,r=e.transitionTo;return E(c.default,{},void 0,E(c.Image,{src:n(10525),className:h.default.marginBottom20}),E(c.Title,{className:h.default.marginBottom8},void 0,v.default.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_FAILURE_HEADER),E(c.SubTitle,{},void 0,v.default.Messages.AUTH_DISABLE_EMAIL_NOTIFICATIONS_FAILURE_BODY),E(c.Button,{className:h.default.marginTop40,onClick:function(){return r(t)}},void 0,v.default.Messages.CONTINUE_TO_WEBAPP))},i.render=function(){var e=this.state,t=e.busy,n=e.success;return t?this.renderBusy():n?this.renderSuccess():this.renderError()},a}(a.PureComponent);I.displayName="DisableEmailNotifications",I.defaultProps={transitionTo:function(t){return e.location.assign(t)}};var T=i.default.connectStores([d.default],(function(){return{defaultRoute:d.default.defaultRoute}}))(I);t.default=T}).call(this,n(35))},10525:function(e,t,n){e.exports=n.p+"4dfc23421736b1eaf2a19bcb16633bad.svg"},10526:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o=M(n(0)),i=R(n(8)),u=R(n(4)),l=R(n(319)),s=M(n(5268)),f=M(n(7665)),d=M(n(930)),c=R(n(9155)),p=n(5048),v=R(n(10)),h=R(n(5263)),m=R(n(7567)),g=R(n(100)),_=R(n(318)),E=M(n(413)),y=M(n(407)),I=R(n(132)),T=R(n(5293)),O=R(n(5065)),N=R(n(7739)),S=n(1),A=R(n(7)),b=R(n(401));function R(e){return e&&e.__esModule?e:{default:e}}function C(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return C=function(){return e},e}function M(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=C();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function P(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function L(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){L(o,r,a,i,u,"next",e)}function u(e){L(o,r,a,i,u,"throw",e)}i(void 0)}))}}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}u.default.initialize(),function(e){e.REGISTER="register",e.LOGIN="login"}(a||(a={}));var k=P(E.AuthSpinner,{}),G=function(e){var t,r;function o(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={error:null,continueOnWeb:!1,currentUser:null,sentVerification:!1,fetchingUser:!1},t.refreshUser=function(){t.setState({fetchingUser:!0}),d.fetchCurrentUser({withAnalyticsToken:!0}).then((function(e){return t.setState({currentUser:e,fetchingUser:!1})})).catch((function(){return t.setState({fetchingUser:!1})}))},t.handleContinue=function(){(0,t.props.transitionTo)(S.Routes.APPLICATION_LIBRARY)},t.handleLogout=function(){var e=t.props.match.params.giftCode;l.default.logout(S.Routes.GIFT_CODE_LOGIN(e))},t.handleResendVerification=function(){l.default.verifyResend(),t.setState({sentVerification:!0})},t.handleAccept=w(regeneratorRuntime.mark((function e(){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,r=n.transitionTo,null!=(a=n.giftCode)){e.next=3;break}throw new Error("Trying to accept gift before resolve");case 3:return o=t.getCode(),e.prev=4,t.setState({error:null}),e.next=8,s.redeemGiftCode(o);case 8:a.premiumSubscriptionType===S.PremiumTypes.TIER_2?r(S.Routes.APPLICATION_STORE):a.premiumSubscriptionType===S.PremiumTypes.TIER_1?r(S.Routes.ACTIVITY):r(S.Routes.APPLICATION_LIBRARY),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),t.setState({error:e.t0});case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),t}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u,c,v,h=o.prototype;return h.componentDidMount=function(){this.props.authenticated&&this.handleAuthenticated(),(0,p.trackAppUIViewed)("gift_code")},h.componentDidUpdate=function(e){var t=this.props.authenticated,n=this.getCode();n!==this.getCode(e)&&s.resolveGiftCode(n,!0,!0),t&&!e.authenticated&&this.handleAuthenticated(),!t&&e.authenticated&&this.setState({currentUser:null})},h.handleAuthenticated=function(){var e=this.state.currentUser;f.fetchLibrary(),null==e&&this.refreshUser()},h.getCode=function(e){return void 0===e&&(e=this.props),e.match.params.giftCode},h.getMode=function(e){return void 0===e&&(e=this.props),e.login?a.LOGIN:a.REGISTER},h.getErrorMessage=function(e){var t=this.props.libraryApplication,n=this.state.error,r=null!=n?n.code:null;return r===S.AbortCodes.INVALID_GIFT_SELF_REDEMPTION?A.default.Messages.GIFT_CONFIRMATION_BODY_SELF_GIFT_NO_PAYMENT:null!=t||r===S.AbortCodes.INVALID_GIFT_REDEMPTION_OWNED?A.default.Messages.GIFT_CODE_AUTH_HELP_TEXT_OWNED.format({libraryLink:S.Routes.APPLICATION_LIBRARY}):e.isClaimed||r===S.AbortCodes.INVALID_GIFT_REDEMPTION_EXHAUSTED?A.default.Messages.GIFT_CODE_AUTH_HELP_TEXT_CLAIMED:null},h.renderSpinner=function(e){return P(E.default,{},void 0,P(E.Title,{},void 0,e),k)},h.renderExpiredInvite=function(){var e=this.props,t=e.defaultRoute,r=e.transitionTo;return P(E.default,{},void 0,P(E.Image,{src:n(9156),className:b.default.marginBottom8}),P(E.Title,{className:(0,i.default)(b.default.marginTop8,b.default.marginBottom8)},void 0,A.default.Messages.GIFT_CODE_AUTH_INVALID_TITLE),P(E.SubTitle,{},void 0,A.default.Messages.GIFT_CODE_AUTH_INVALID_BODY),P(E.Button,{className:(0,i.default)(b.default.marginTop40,b.default.marginBottom8),onClick:function(){return r(t)}},void 0,A.default.Messages.CONTINUE_TO_WEBAPP),P(E.Button,{onClick:function(){return window.open(I.default.getArticleURL(S.HelpdeskArticles.GIFTING),"_blank")},look:E.Button.Looks.LINK},void 0,A.default.Messages.GIFT_CODE_AUTH_INVALID_TIP))},h.renderAppOpened=function(){var e=this;return P(E.default,{},void 0,P(E.Title,{className:b.default.marginBottom8},void 0,A.default.Messages.APP_OPENED_TITLE),P(E.SubTitle,{},void 0,A.default.Messages.APP_OPENED_BODY),P(E.Button,{className:b.default.marginTop40,onClick:function(){return e.setState({continueOnWeb:!0})}},void 0,A.default.Messages.GIFT_CODE_AUTH_CONTINUE_IN_BROWSER))},h.renderVerification=function(e){var t=this.state.sentVerification;return P(E.default,{},void 0,P(E.Image,{src:n(9390),className:b.default.marginBottom8}),P(E.Title,{},void 0,A.default.Messages.GIFT_CODE_AUTH_VERIFICATION_TITLE.format({username:e.username})),P(E.SubTitle,{className:b.default.marginTop20},void 0,A.default.Messages.GIFT_CODE_AUTH_HELP_TEXT_VERIFICATION_REQUIRED),P(E.Button,{disabled:t,className:b.default.marginTop40,onClick:this.handleResendVerification},void 0,t?A.default.Messages.GIFT_CODE_AUTH_VERIFICATION_SENT:A.default.Messages.RESEND_VERIFICATION_EMAIL),P(E.Button,{look:E.Button.Looks.LINK,onClick:this.refreshUser,className:b.default.marginTop8},void 0,A.default.Messages.GIFT_CODE_AUTH_CHECK_VERIFICATION_AGAIN))},h.renderAuthenticated=function(e,t){var n=this.getErrorMessage(e),r=null!=n;return P(E.default,{},void 0,P(T.default,{giftCode:e}),P(E.Button,{disabled:r,className:b.default.marginTop40,onClick:this.handleAccept},void 0,A.default.Messages.GIFT_CODE_AUTH_ACCEPT),null!=n?P(E.SubTitle,{className:b.default.marginTop20},void 0,n):P(E.SubText,{className:b.default.marginTop20},void 0,A.default.Messages.GIFT_CODE_AUTH_LOGGED_IN_AS.format({userTag:t.tag,onLogoutClick:this.handleLogout})))},h.render=function(){var e=this.props,t=e.nativeAppState,n=e.sku,r=e.authenticated,o=e.giftCode,i=e.isResolved,u=e.isAccepting,l=e.transitionTo,s=e.location,f=this.state,d=f.fetchingUser,c=f.continueOnWeb;if(t===S.NativeAppStates.OPEN&&!c)return this.renderAppOpened();if(t===S.NativeAppStates.OPENING)return this.renderSpinner(A.default.Messages.APP_OPENING);if(u)return this.renderSpinner(A.default.Messages.GIFT_CODE_AUTH_ACCEPTING);if(null==o)return i?this.renderExpiredInvite():this.renderSpinner(A.default.Messages.GIFT_CODE_AUTH_RESOLVING);if(i){if(r){var p=this.state.currentUser;return d||null==p?this.renderSpinner(A.default.Messages.GIFT_CODE_AUTH_FETCHING_USER):this.requiresVerification&&null!=p?this.renderVerification(p):this.renderAuthenticated(o,p)}return this.getMode()===a.LOGIN?P(O.default,{giftCodeSKU:n,giftCode:o,transitionTo:l,location:s}):P(N.default,{giftCodeSKU:n,giftCode:o,transitionTo:l,location:s})}return null},u=o,(c=[{key:"requiresVerification",get:function(){var e=this.state.currentUser;return null!=e&&!e.verified}}])&&D(u.prototype,c),v&&D(u,v),o}(o.PureComponent);G.displayName="GiftCode";var B=u.default.connectStores([m.default,g.default,v.default,_.default,h.default,c.default],(function(e){var t=e.match.params.giftCode,n=m.default.get(t),r=null!=n?_.default.get(n.skuId):null;return{giftCode:n,sku:r,libraryApplication:null!=r&&null!=n?y.firstLibraryApplicationForGiftCode(n,r,g.default):null,authenticated:v.default.isAuthenticated(),defaultRoute:h.default.defaultRoute,isResolved:m.default.getIsResolved(t),isAccepting:m.default.getIsAccepting(t),libraryApplicationsFetched:g.default.fetched,nativeAppState:c.default.getState(t)}}))(G);t.default=B},10527:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=F;var r,a=D(n(0)),o=L(n(8)),i=L(n(20)),u=n(328),l=D(n(4)),s=L(n(9155)),f=L(n(959)),d=n(247),c=L(n(7937)),p=L(n(8237)),v=L(n(5273)),h=L(n(5288)),m=n(7634),g=n(7586),_=n(5048),E=n(363),y=L(n(672)),I=L(n(10)),T=L(n(5263)),O=D(n(413)),N=L(n(1044)),S=L(n(5065)),A=L(n(5294)),b=L(n(7739)),R=n(1),C=L(n(7)),M=L(n(7252)),P=L(n(401));function L(e){return e&&e.__esModule?e:{default:e}}function w(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return w=function(){return e},e}function D(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=w();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}l.default.initialize();var B=G(O.AuthSpinner,{}),U=function(e){var t,r;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleContinue=function(){var e=t.props,n=e.defaultRoute;(0,e.transitionTo)(n)},t}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var l=a.prototype;return l.componentDidMount=function(){(0,_.trackAppUIViewed)("guildTemplate"),u.IS_APP_COMPATIBLE_BROWSER||N.default.launch("discord://"+R.Routes.GUILD_TEMPLATE(this.props.code),(function(){}))},l.componentDidUpdate=function(e){this.props.code!==e.code&&p.default.resolveGuildTemplate(this.props.code)},l.renderButton=function(e,t){return u.IS_APP_COMPATIBLE_BROWSER?G(O.Button,{className:P.default.marginTop40,onClick:t},void 0,e):G(O.IncompatibleBrowser,{className:P.default.marginTop40})},l.renderSpinner=function(e){return G(O.default,{},void 0,G(O.Title,{},void 0,e),B)},l.renderInvalidGuildTemplate=function(){return G(O.default,{},void 0,G(O.Image,{src:n(9156),className:P.default.marginBottom8}),G(O.Title,{className:(0,o.default)(P.default.marginTop8,P.default.marginBottom8)},void 0,C.default.Messages.GUILD_TEMPLATE_INVALID_TITLE),G(O.SubTitle,{},void 0,C.default.Messages.GUILD_TEMPLATE_INVALID_SUBTITLE),this.renderButton(C.default.Messages.CONTINUE_TO_WEBAPP,this.handleContinue))},l.renderAppOpened=function(){return G(O.default,{},void 0,G(O.Title,{className:P.default.marginBottom8},void 0,C.default.Messages.APP_OPENED_TITLE),G(O.SubTitle,{},void 0,C.default.Messages.APP_OPENED_BODY),this.renderButton(C.default.Messages.CONTINUE_TO_WEBAPP,this.handleContinue))},l.renderAuthenticatedOrDownload=function(){var e=this.props.guildTemplate;return(0,i.default)(null!=e,"guild template must not be null"),e.state===d.GuildTemplateStates.RESOLVING?G(O.default,{className:M.default.authBox},void 0,G(h.default,{guildTemplate:e})):G(j,{guildTemplate:e})},l.renderContinue=function(){return G(O.default,{},void 0,G(O.Title,{},void 0,C.default.Messages.APP_NOT_OPENED),this.renderButton(C.default.Messages.CONTINUE_TO_WEBAPP,this.handleContinue))},l.render=function(){var e=this.props,t=e.guildTemplate,n=e.nativeAppState,r=e.authenticated,a=e.transitionTo,o=e.location;if(null==t)return this.renderSpinner(C.default.Messages.LOADING);if(n===R.NativeAppStates.OPEN)return this.renderAppOpened();if(n===R.NativeAppStates.OPENING)return this.renderSpinner(C.default.Messages.APP_OPENING);switch(t.state){case d.GuildTemplateStates.RESOLVING:return this.renderSpinner(C.default.Messages.APP_OPENING);case d.GuildTemplateStates.RESOLVED:return r||!u.IS_APP_COMPATIBLE_BROWSER?this.renderAuthenticatedOrDownload():this.props.login?G(S.default,{guildTemplate:t,transitionTo:a,location:o}):G(b.default,{guildTemplate:t,transitionTo:a,location:o,onRegister:function(){(0,m.setNewUser)(g.NewUserTypes.ORGANIC_REGISTERED_GUILD_TEMPLATE),y.default.flowStart(E.FlowType.ORGANIC_GUILD_TEMPLATES,E.RegistrationSteps.NUF_STARTED)}});case d.GuildTemplateStates.EXPIRED:return this.renderInvalidGuildTemplate();default:return null}},a}(a.PureComponent);function F(e){var t={guildTemplate:(0,l.useStateFromStores)([f.default],(function(){return f.default.getGuildTemplate(e.code)})),nativeAppState:(0,l.useStateFromStores)([s.default],(function(){return s.default.getState(e.code)})),authenticated:(0,l.useStateFromStores)([I.default],(function(){return I.default.isAuthenticated()})),guestLurker:(0,l.useStateFromStores)([I.default],(function(){return I.default.isGuest()})),defaultRoute:(0,l.useStateFromStores)([T.default],(function(){return T.default.defaultRoute}))};return a.createElement(U,k({},e,t))}function j(e){var t=e.guildTemplate,n=(0,c.default)(t,!1),r=n.form,o=n.handleSubmit;y.default.flowStep(E.FlowType.ORGANIC_GUILD_TEMPLATES,E.CreateGuildSteps.GUILD_CREATE);var i=a.createElement(a.Fragment,null,G(O.Title,{className:M.default.header},void 0,C.default.Messages.GUILD_TEMPLATE_SETUP_DISCORD),r,G(O.Button,{className:M.default.createButton,onClick:o},void 0,C.default.Messages.GUILD_TEMPLATE_CREATE_DISCORD)),u=G(v.default,{guildTemplate:t});return G(A.default,{className:M.default.authBox},void 0,(function(){return[u,G("div",{className:M.default.formContainer},void 0,i)]}))}U.displayName="GuildTemplate",F.displayName="ConnectedGuildTemplate",j.displayName="GuildTemplateAuthBox"},10528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=S;var r,a=I(n(0)),o=I(n(4)),i=E(n(959)),u=n(247),l=E(n(8237)),s=E(n(5288)),f=n(5048),d=E(n(10)),c=E(n(223)),p=I(n(413)),v=E(n(18)),h=E(n(9391)),m=n(1),g=E(n(7)),_=E(n(401));function E(e){return e&&e.__esModule?e:{default:e}}function y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}function I(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function T(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function O(e,t,n){e.preventDefault(),v.default.track(m.AnalyticEvents.GUILD_TEMPLATE_APP_OPENED,{guild_template_code:t,guild_template_name:n.name,guild_template_description:n.description,guild_template_guild_id:n.sourceGuildId});var r=d.default.getFingerprint(),a=null!=r?r:d.default.getId();l.default.openMobileApp(n.state===u.GuildTemplateStates.RESOLVED?t:void 0,a)}o.default.initialize();var N=T(p.default,{},void 0,T(c.default,{}));function S(e){var t=e.code,n=(0,o.useStateFromStores)([i.default],(function(){return i.default.getGuildTemplate(t)}));return a.useEffect((function(){(0,f.trackAppUIViewed)("guild_template_mobile")}),[]),null==n||n.state===u.GuildTemplateStates.RESOLVING?N:n.state===u.GuildTemplateStates.RESOLVED?T(p.default,{},void 0,T(s.default,{guildTemplate:n,tall:!0}),T(p.Button,{onClick:function(e){return O(e,t,n)},className:_.default.marginTop20},void 0,g.default.Messages.GUILD_TEMPLATE_OPEN)):T(h.default,{text:g.default.Messages.GUILD_TEMPLATE_MOBILE_INVALID_ERROR,buttonCta:g.default.Messages.GUILD_TEMPLATE_MOBILE_INVALID_CTA,onClick:function(e){return O(e,t,n)}})}S.displayName="GuildTemplateMobile"},10529:function(e,t,n){e.exports=n.p+"07c4931451dfa8c32fc8551b48a89536.svg"},10530:function(e,t,n){e.exports=n.p+"96191331272ece160a85126d54e49f3d.svg"},10531:function(e,t,n){e.exports=n.p+"acb452cda03a99894210f832308c055d.svg"},10532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=w(n(0)),o=P(n(8)),i=n(328),u=P(n(4)),l=P(n(985)),s=P(n(172)),f=P(n(8002)),d=P(n(9155)),c=n(7634),p=n(7586),v=n(47),h=n(5048),m=P(n(10)),g=P(n(5263)),_=P(n(958)),E=w(n(413)),y=P(n(18)),I=w(n(10533)),T=P(n(132)),O=n(7489),N=P(n(1044)),S=P(n(5276)),A=P(n(5065)),b=P(n(7739)),R=n(1),C=P(n(7)),M=P(n(401));function P(e){return e&&e.__esModule?e:{default:e}}function L(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return L=function(){return e},e}function w(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=L();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function D(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}u.default.initialize();var G="register",B="login",U=D(E.AuthSpinner,{}),F=function(e){var t,r;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={error:null},t.getAcceptInviteContext=function(e){return l.default.getInviteContext(e,t.props.invite)},t.handleContinue=function(){var e=t.props,n=e.invite,r=e.transitionTo;null!=n.channel&&l.default.transitionToInvite(n,r)},t.handleAccept=function(){t.setState({error:null});var e=t.props.invite,n=t.getCode();l.default.acceptInvite(n,t.getAcceptInviteContext("Accept Invite Page"),(function(){null!=e.channel&&l.default.openApp(n,e.channel.id)})).catch((function(e){if(e instanceof s.default){var n=(0,O.getInviteError)(e.code);t.setState({error:n})}else t.setState({error:C.default.Messages.INVITE_MODAL_ERROR_DEFAULT})}))},t.handleDefaultTransition=function(){var e=t.props,n=e.defaultRoute;(0,e.transitionTo)(n)},t}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=a.prototype;return u.componentDidMount=function(){var e=this.props,t=e.isUnderage,n=e.login;if(y.default.track(R.AnalyticEvents.INVITE_VIEWED,{},{flush:!0}),(0,h.trackAppUIViewed)("invite"),!i.IS_APP_COMPATIBLE_BROWSER){var r=this.getCode();N.default.launch("discord://"+R.Routes.INVITE(r),(function(){}))}!n&&t&&(0,v.replaceWith)(R.Routes.INVITE_LOGIN(this.getCode()))},u.componentDidUpdate=function(e){var t=this.props,n=t.invite,r=t.nativeAppState,a=t.authenticated,o=t.transitionTo,i=t.guestLurker,u=this.getCode();if(u!==this.getCode(e))l.default.resolveInvite(u,"Accept Invite Page");else if(n.state===R.InviteStates.APP_NOT_OPENED)this.handleContinue();else if(this.getMode()===B&&a!==e.authenticated&&a){var s=m.default.getFingerprint();if(null!=s){var f=I.extractId(s);this.track(R.AnalyticEvents.INVITE_LOGIN_SUCCESSFUL,!0,{prev_user_id:f})}l.default.acceptInvite(u,this.getAcceptInviteContext("Accept Invite Page"),this.handleContinue)}(r!==e.nativeAppState&&r===R.NativeAppStates.OPEN&&this.track(R.AnalyticEvents.INVITE_APP_INVOKED,!1),this.getMode()===G&&a&&!e.authenticated)&&(null!=n.channel&&((0,c.setNewUser)(p.NewUserTypes.INVITE_UNCLAIMED),l.default.transitionToInvite(n,o)));null!=n.guest_token&&i&&n.state===R.InviteStates.RESOLVED&&r===R.NativeAppStates.OPEN_FAIL&&setTimeout(this.handleContinue,300)},u.getCode=function(e){return void 0===e&&(e=this.props),e.inviteCode},u.getMode=function(e){return void 0===e&&(e=this.props),e.login?B:G},u.track=function(e,t,n){void 0===n&&(n=null);var r=this.props.invite,a=this.getCode(),o=t?{guild_id:r.guild?r.guild.id:null,channel_id:r.channel?r.channel.id:null,inviter_id:r.inviter?r.inviter.id:null,invite_code:a}:{invite_code:a};y.default.track(e,k({},o,{},n))},u.renderButton=function(e,t){return void 0===t&&(t=this.handleDefaultTransition),i.IS_APP_COMPATIBLE_BROWSER?D(E.Button,{className:M.default.marginTop40,onClick:t},void 0,e):D(E.IncompatibleBrowser,{className:M.default.marginTop40})},u.renderSpinner=function(e){return D(E.default,{},void 0,D(E.Title,{},void 0,e),U)},u.renderInvalidInvite=function(e){return void 0===e&&(e=!1),D(E.default,{},void 0,D(E.Image,{src:n(9156),className:M.default.marginBottom8}),D(E.Title,{className:(0,o.default)(M.default.marginTop8,M.default.marginBottom8)},void 0,C.default.Messages.AUTH_INVALID_INVITE_TITLE),D(E.SubTitle,{},void 0,e?C.default.Messages.AUTH_BANNED_INVITE_BODY:C.default.Messages.AUTH_INVALID_INVITE_BODY),this.renderButton(C.default.Messages.CONTINUE_TO_WEBAPP),D(E.Button,{onClick:function(){return window.open(T.default.getArticleURL(R.HelpdeskArticles.INVALID_INVITES),"_blank")},look:E.Button.Looks.LINK,className:M.default.marginTop8},void 0,C.default.Messages.AUTH_INVALID_INVITE_TIP))},u.renderErrorInvite=function(){return D(E.default,{},void 0,D(S.default,{invite:this.props.invite,error:this.state.error}),this.renderButton(C.default.Messages.INSTANT_INVITE_ACCEPT,this.handleAccept))},u.renderExpiredInvite=function(){return this.renderInvalidInvite(!1)},u.renderBannedInvite=function(){return this.renderInvalidInvite(!0)},u.renderAppOpened=function(){return D(E.default,{},void 0,D(E.Title,{className:M.default.marginBottom8},void 0,C.default.Messages.APP_OPENED_TITLE),D(E.SubTitle,{},void 0,C.default.Messages.APP_OPENED_BODY),this.renderButton(C.default.Messages.CONTINUE_TO_WEBAPP,this.handleContinue))},u.renderAuthenticatedOrDownload=function(){var e=this.props.invite;return D(E.default,{},void 0,D(S.default,{invite:e}),this.renderButton(C.default.Messages.INSTANT_INVITE_ACCEPT,this.handleAccept))},u.renderContinue=function(){return D(E.default,{},void 0,D(E.Title,{},void 0,C.default.Messages.APP_NOT_OPENED),this.renderButton(C.default.Messages.CONTINUE_TO_WEBAPP))},u.render=function(){var e=this,t=this.props,n=t.invite,r=t.nativeAppState,a=t.authenticated,o=t.guestLurker,u=t.transitionTo,l=t.location;if(r===R.NativeAppStates.OPEN)return this.renderAppOpened();switch(n.state){case R.InviteStates.APP_OPENED:return this.renderAppOpened();case R.InviteStates.APP_NOT_OPENED:return this.renderContinue();case R.InviteStates.RESOLVING:case R.InviteStates.APP_OPENING:return this.renderSpinner(C.default.Messages.APP_OPENING);case R.InviteStates.RESOLVED:return a||!i.IS_APP_COMPATIBLE_BROWSER?this.renderAuthenticatedOrDownload():null!=n.guest_token&&o?this.renderSpinner(C.default.Messages.INSTANT_INVITE_RESOLVED_TITLE):this.getMode()===B?D(A.default,{invite:n,transitionTo:u,location:l}):D(b.default,{invite:n,onLoginStart:function(){return e.track(R.AnalyticEvents.INVITE_LOGIN,!0)},location:l,transitionTo:u});case R.InviteStates.ACCEPTING:return this.renderSpinner(C.default.Messages.INSTANT_INVITE_ACCEPTING);case R.InviteStates.EXPIRED:return this.renderExpiredInvite();case R.InviteStates.BANNED:return this.renderBannedInvite();case R.InviteStates.ERROR:return this.renderErrorInvite();case R.InviteStates.ACCEPTED:default:return null}},a}(a.PureComponent);F.displayName="Invite";var j=u.default.connectStores([_.default,g.default,m.default,d.default,f.default],(function(e){var t=e.inviteCode;return{invite:_.default.getInvite(t)||{},nativeAppState:d.default.getState(t),authenticated:m.default.isAuthenticated(),guestLurker:m.default.isGuest(),defaultRoute:g.default.defaultRoute,isUnderage:f.default.isUnderageAnonymous()}}))(F);t.default=j},10533:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"extractId",{enumerable:!0,get:function(){return r.extractId}});var r=n(684)},10534:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=T(n(0)),o=T(n(4)),i=y(n(985)),u=n(406),l=n(5048),s=y(n(10)),f=y(n(958)),d=y(n(223)),c=T(n(413)),p=y(n(18)),v=y(n(9391)),h=y(n(5276)),m=n(1),g=y(n(7)),_=y(n(7254)),E=y(n(10535));function y(e){return e&&e.__esModule?e:{default:e}}function I(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return I=function(){return e},e}function T(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=I();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function O(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}o.default.initialize();var S=(0,u.registerUserExperiment)({id:u.Experiments.INVITE_MARKETING_VALUE_PROPS,title:"Invite: Marketing Value Props",description:["Give users more information why they should join a Discord server","Treatment 1: Server Banner + Description","Treatment 2: Server Banner + Description + Long Value Props","Treatment 3: Server Banner + Description + Short Value Props"],buckets:[u.ExperimentBuckets.CONTROL,u.ExperimentBuckets.TREATMENT_1,u.ExperimentBuckets.TREATMENT_2,u.ExperimentBuckets.TREATMENT_3]}),A=new Map;A.set("pogostl",{serverDescription:"Check out the Pokemon GO St. Louis community on Discord - free text and voice chat app used by 250M people."}),A.set("pogoarizona",{serverDescription:"Check out the Pokemon GO Arizona community on Discord - free text and voice chat app used by 250M people."}),A.set("pogohouston",{serverDescription:"Check out the Pokemon GO Houston community on Discord - free text and voice chat app used by 250M people."}),A.set("pogolacounty",{serverDescription:"Check out the Pokemon GO LA community on Discord - free text and voice chat app used by 250M people."});var b=O("path",{d:"M1.9 4.26H0V11.2941H1.9V4.26Z"}),R=O("path",{d:"M17.1 0V1.12659L2.85 4.26447V14.1176C2.85 14.5496 3.1464 14.9252 3.5701 15.0315L7.3701 15.9727C7.4461 15.9906 7.524 16 7.6 16C7.89545 16 8.1776 15.8635 8.36 15.6235L10.7065 12.5242L17.1 13.9304V15.0588H19V0H17.1ZM7.2181 13.9944L4.75 13.3826V11.2113L8.67065 12.0753L7.2181 13.9944Z"});function C(e){return a.createElement("svg",N({},e,{viewBox:"0 0 19 16",xmlns:"http://www.w3.org/2000/svg"}),b,R)}C.displayName="AnnouncementsIcon";var M=O("path",{d:"M13.616 4.72429C13.5133 4.47506 13.2693 4.31203 13 4.31203H9.41199L7.59599 0.672571C7.36999 0.220227 6.62933 0.220227 6.40333 0.672571L4.58799 4.31203H0.999993C0.730659 4.31203 0.486659 4.47506 0.383993 4.72429C0.281326 4.97351 0.337993 5.26215 0.528659 5.45258L3.58466 8.51542L2.35933 12.815C2.28266 13.0843 2.38133 13.3729 2.60666 13.538C2.83333 13.7037 3.13799 13.7097 3.36933 13.554L6.99999 11.1286L10.63 13.554C10.742 13.6288 10.8707 13.6663 11 13.6663C11.138 13.6663 11.276 13.6235 11.3933 13.538C11.6187 13.3729 11.7173 13.0843 11.6407 12.815L10.4153 8.51542L13.4713 5.45258C13.662 5.26215 13.7187 4.97351 13.616 4.72429Z"});function P(e){return a.createElement("svg",N({},e,{viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"}),M)}P.displayName="StarIcon";var L=O("path",{d:"M1.33331 2.66663V3.66663C1.33331 6.43329 2.80665 8.85329 4.99998 10.2V13.3333H15V12C15 10.2266 11.4466 9.33329 9.66665 9.33329C9.66665 9.33329 9.55331 9.33329 9.49998 9.33329C6.33331 9.33329 3.66665 6.66663 3.66665 3.66663V2.66663H1.33331ZM9.66665 2.66663C8.19389 2.66663 6.99998 3.86053 6.99998 5.33329C6.99998 6.80605 8.19389 7.99996 9.66665 7.99996C11.1394 7.99996 12.3333 6.80605 12.3333 5.33329C12.3333 3.86053 11.1394 2.66663 9.66665 2.66663Z"});function w(e){return a.createElement("svg",N({},e,{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"}),L)}function D(e,t,n){e.preventDefault(),p.default.track(m.AnalyticEvents.INVITE_APP_OPENED,{invite_code:t,guild_id:(null==n?void 0:n.guild)?n.guild.id:null,channel_id:(null==n?void 0:n.channel)?n.channel.id:null,inviter_id:(null==n?void 0:n.inviter)?n.inviter.id:null});var r=null!=n&&n.state!==m.InviteStates.EXPIRED&&n.state!==m.InviteStates.BANNED?t:void 0,a=s.default.getFingerprint(),o=null!=a?a:s.default.getId();i.default.openApp(r,void 0,o)}w.displayName="FriendsIcon";var k=O(d.default,{});function G(e){return O(c.default,{theme:e.theme},void 0,k)}G.displayName="InviteSpinner";var B=O(C,{fill:"#7289DA",width:"14"}),U=O(P,{fill:"#FAA61A",width:"15"}),F=O(w,{fill:"#43B581",width:"16"});function j(e){var t,n,r,a,o,i,l=(t=e.inviteCode,n=A.get(t),r=null!=n,a=(0,u.useAndTrackExposureToUserExperiment)(N({},S,{clientFilter:{isEligible:function(){return r}}})),o=null!=n?n.serverDescription:null,{active:i=r&&a!==u.ExperimentBuckets.CONTROL&&a!==u.ExperimentBuckets.NOT_ELIGIBLE,serverDescription:o,showServerDescription:i,showServerBanner:i,showServerValueProps:i&&(a===u.ExperimentBuckets.TREATMENT_2||a===u.ExperimentBuckets.TREATMENT_3),shortValueProps:i&&a===u.ExperimentBuckets.TREATMENT_2}),s=[{key:"announcements",labelShort:g.default.Messages.INVITE_POKEMON_GO_ANNOUNCEMENTS_LABEL_SHORT.format(),labelLong:g.default.Messages.INVITE_POKEMON_GO_ANNOUNCEMENTS_LABEL_LONG.format(),icon:B},{key:"strategy",labelShort:g.default.Messages.INVITE_POKEMON_GO_STRATEGY_LABEL_SHORT.format(),labelLong:g.default.Messages.INVITE_POKEMON_GO_STRATEGY_LABEL_LONG.format(),icon:U},{key:"friendship",labelShort:g.default.Messages.INVITE_POKEMON_GO_FRIENDSHIP_LABEL_SHORT.format(),labelLong:g.default.Messages.INVITE_POKEMON_GO_FRIENDSHIP_LABEL_LONG.format(),icon:F}];return O(c.default,{theme:e.theme,mobileBanner:l.showServerBanner?E.default:null},void 0,O(h.default,{invite:e.invite,description:l.active?l.serverDescription:null,flatActivityCount:l.active}),l.showServerValueProps&&O("ul",{className:_.default.valueProps},void 0,s.map((function(e){return O("li",{className:_.default.valuePropItem},e.key,O("span",{className:_.default.valuePropIcon},void 0,e.icon),O("span",{className:_.default.valuePropLabel},void 0,l.shortValueProps?e.labelShort:e.labelLong))}))),O(c.Button,{onClick:function(t){return D(t,e.inviteCode,e.invite)},className:_.default.acceptButton},void 0,g.default.Messages.INSTANT_INVITE_ACCEPT))}j.displayName="ValidInvite";var x=function(e){var t=e.inviteCode,n=(0,o.useStateFromStores)([f.default],(function(){return f.default.getInvite(t)}));if(a.useEffect((function(){p.default.track(m.AnalyticEvents.INVITE_VIEWED,{},{flush:!0}),(0,l.trackAppUIViewed)("invite_mobile")}),[]),null==n)return O(j,{theme:m.ThemeTypes.DARK,invite:n,inviteCode:t});switch(n.state){case m.InviteStates.EXPIRED:return O(v.default,{text:g.default.Messages.INVITE_INVALID_ERROR,buttonCta:g.default.Messages.INVITE_INVALID_CTA,onClick:function(e){return D(e,t,n)}});case m.InviteStates.BANNED:return O(v.default,{text:g.default.Messages.AUTH_BANNED_INVITE_BODY,buttonCta:g.default.Messages.INVITE_INVALID_CTA,onClick:function(e){return D(e,t,n)}});case m.InviteStates.RESOLVING:return O(G,{theme:m.ThemeTypes.DARK});default:return O(j,{theme:m.ThemeTypes.DARK,invite:n,inviteCode:t})}};t.default=x},10535:function(e,t,n){e.exports=n.p+"a580fd6dc66042ed4d0745deae03626c.png"},10536:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=I(n(0)),o=E(n(8)),i=n(5046),u=E(n(4)),l=E(n(319)),s=E(n(8573)),f=E(n(9392)),d=n(5048),c=E(n(10)),p=I(n(413)),v=n(109),h=n(349),m=n(1),g=E(n(7)),_=E(n(401));function E(e){return e&&e.__esModule?e:{default:e}}function y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}function I(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function T(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function O(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){O(o,r,a,i,u,"next",e)}function u(e){O(o,r,a,i,u,"throw",e)}i(void 0)}))}}u.default.initialize();var S=function(e){var t,r;function a(t){var n;(n=e.call(this,t)||this).handleSubmit=function(){var e=N(regeneratorRuntime.mark((function e(t){var r,a,o,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props.location,a=n.state,o=a.password,i=a.error,null!=t&&t.preventDefault(),0!==o.length){e.next=9;break}return n.setState({error:g.default.Messages.PASSWORD_REQUIRED}),v.ComponentDispatch.dispatch(m.ComponentActions.WAVE_EMPHASIZE),e.abrupt("return");case 9:null!=i&&n.setState({error:null});case 10:if(null!=(u=(0,s.default)(r))){e.next=13;break}return e.abrupt("return");case 13:return n.setState({working:!0}),e.prev=14,e.next=17,l.default.resetPassword(u,o);case 17:e.sent&&n.handlePasswordChangeSuccess(),e.next=23;break;case 21:e.prev=21,e.t0=e.catch(14);case 23:n.setState({working:!1});case 24:case"end":return e.stop()}}),e,null,[[14,21]])})));return function(t){return e.apply(this,arguments)}}(),n.handleTokenSubmit=function(){var e=N(regeneratorRuntime.mark((function e(t){var r,a,o,i,u,f,d,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.location,o=r.mfaTicket,i=n.state,u=i.code,f=i.password,d=i.error,null!=t&&t.preventDefault(),0!==f.length){e.next=9;break}return n.setState({error:g.default.Messages.PASSWORD_REQUIRED}),v.ComponentDispatch.dispatch(m.ComponentActions.WAVE_EMPHASIZE),e.abrupt("return");case 9:null!=d&&n.setState({error:null});case 10:if(null!=(c=(0,s.default)(a))){e.next=13;break}return e.abrupt("return");case 13:return n.setState({working:!0}),e.prev=14,e.next=17,l.default.resetPasswordMFA(u,o,f,c);case 17:n.handlePasswordChangeSuccess(),e.next=22;break;case 20:e.prev=20,e.t0=e.catch(14);case 22:n.setState({working:!1});case 23:case"end":return e.stop()}}),e,null,[[14,20]])})));return function(t){return e.apply(this,arguments)}}(),n.handlePasswordChangeSuccess=function(){var e=n.props.replaceWith;h.isTablet||h.isMobile?n.setState({success:!0}):e(m.Routes.APP)},n.handleGoToLogin=function(){var e=n.props.transitionTo;l.default.loginReset(),e(m.Routes.LOGIN)},n.isSubmitting=function(){var e=n.props.loginStatus;return n.state.working||e===m.LoginStates.LOGGING_IN_MFA},n.handleOpenApp=function(){(0,f.default)("password_reset")},n.hasError=function(e){return null!=n.props.errors[e]||null!=n.state.error},n.renderError=function(e){var t=n.props.errors;if(n.hasError(e)){var r=t[e];return Array.isArray(r)?r[0]:r}return null};var r=n.props.location.search?(0,i.parse)(n.props.location.search):null;return n.state={password:"",code:"",error:null,hasCancel:null!=r&&null!=r.from_login,working:!1,success:!1},n}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=a.prototype;return u.componentDidMount=function(){(0,d.trackAppUIViewed)("reset_password")},u.renderPasswordReset=function(){var e=this,t=this.state,r=t.password,a=t.error,o=t.hasCancel,i=this.isSubmitting(),u=a||this.renderError("password");return T(p.default,{onSubmit:this.handleSubmit,tag:"form"},void 0,T("img",{alt:"",src:n(null==u?9157:9393),className:_.default.marginBottom20}),T(p.Title,{},void 0,g.default.Messages.RESET_PASSWORD_TITLE),T(p.Block,{className:_.default.marginTop20},void 0,T(p.Input,{label:g.default.Messages.FORM_LABEL_NEW_PASSWORD,className:_.default.marginBottom20,name:"password",value:r,onChange:function(t){return e.setState({password:t})},error:u,type:"password"}),T(p.Button,{type:"submit",submitting:i},void 0,g.default.Messages.CHANGE_PASSWORD),o?T(p.Button,{className:_.default.marginTop8,onClick:this.handleGoToLogin,submitting:i,color:p.Button.Colors.GREY},void 0,g.default.Messages.CANCEL):null))},u.renderMFA=function(){var e=this,t=this.state.error||this.renderError("code");return T(p.default,{onSubmit:this.handleTokenSubmit,tag:"form"},void 0,T("img",{alt:"",src:n(null==t?9157:9393),className:(0,o.default)(_.default.marginBottom20,h.isMobile?_.default.marginTop20:"")}),T(p.Title,{className:_.default.marginBottom8},void 0,g.default.Messages.TWO_FA_ENTER_TOKEN_LABEL),T(p.SubTitle,{},void 0,g.default.Messages.TWO_FA_ENTER_TOKEN_BODY),T(p.Block,{className:_.default.marginTop20},void 0,T(p.Input,{className:_.default.marginBottom8,error:t,onChange:function(t){return e.setState({code:t})},autoComplete:"off",placeholder:g.default.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,value:this.state.code}),T(p.Button,{type:"submit",submitting:this.isSubmitting()},void 0,g.default.Messages.LOGIN)))},u.renderSucceeded=function(){return T(p.default,{},void 0,T("img",{alt:"",src:n(9157),className:(0,o.default)(_.default.marginBottom20,h.isMobile?_.default.marginTop20:"")}),T(p.Title,{className:_.default.marginBottom40},void 0,g.default.Messages.RESET_PASSWORD_SUCCESS_TITLE),T(p.Button,{onClick:this.handleOpenApp},void 0,g.default.Messages.VERIFICATION_OPEN_DISCORD))},u.render=function(){return this.state.success?this.renderSucceeded():this.props.mfaTicket?this.renderMFA():this.renderPasswordReset()},a}(a.PureComponent);S.displayName="ResetPassword",S.defaultProps={transitionTo:function(t){return e.location.assign(t)},replaceWith:function(t){return e.location.replace(t)}};var A=u.default.connectStores([c.default],(function(){return{loginStatus:c.default.getLoginStatus(),mfaTicket:c.default.getMFATicket(),errors:c.default.getErrors()}}))(S);t.default=A}).call(this,n(35))},10537:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=N(n(0)),o=T(n(8)),i=n(120),u=T(n(4)),l=T(n(319)),s=T(n(8573)),f=T(n(9392)),d=n(5048),c=T(n(10)),p=T(n(5303)),v=N(n(413)),h=T(n(18)),m=n(5301),g=n(1),_=T(n(7)),E=T(n(7255)),y=T(n(952)),I=T(n(401));function T(e){return e&&e.__esModule?e:{default:e}}function O(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return O=function(){return e},e}function N(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=O();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function S(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}u.default.initialize();var A=function(e){var t,r;function a(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).handleVerify=function(e){void 0===e&&(e=null);var n=(0,s.default)(t.props.location);null!=n&&l.default.verify(n,e)},t.handleLogin=function(){(0,t.props.transitionTo)(g.Routes.LOGIN)},t.handleOpenApp=function(){var e=t.props.verifyingUserId;h.default.track(g.AnalyticEvents.VERIFY_ACCOUNT_APP_OPENED,{verifying_user_id:e}),(0,f.default)("verify_email")},t}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var u=a.prototype;return u.componentDidMount=function(){this.handleVerify(),(0,d.trackAppUIViewed)("verify_email")},u.renderVerifyCaptcha=function(){var e=this.props.verifyErrors;return S(v.default,{},void 0,S(v.Image,{src:n(9394),className:(0,o.default)(E.default.image,I.default.marginBottom20)}),S(v.Title,{className:I.default.marginBottom8},void 0,_.default.Messages.VERIFICATION_VERIFYING),S(v.SubTitle,{className:I.default.marginBottom40},void 0,_.default.Messages.VERIFICATION_BODY_ALT),S("div",{className:y.default.flexCenter},void 0,S(p.default,{captchaService:(0,m.parseCaptchaType)(e.captcha_service),sitekey:e.captcha_sitekey,className:E.default.recaptcha,theme:i.ThemeTypes.DARK,onVerify:this.handleVerify})))},u.renderVerifyFailed=function(){return S(v.default,{},void 0,S(v.Image,{src:n(10538),className:(0,o.default)(E.default.image,I.default.marginBottom20)}),S(v.Title,{className:I.default.marginBottom8},void 0,_.default.Messages.VERFICATION_EXPIRED),S(v.SubTitle,{className:I.default.marginBottom40},void 0,_.default.Messages.AUTH_VERFICATION_EXPIRED_SUGGESTION),S(v.Button,{onClick:this.handleLogin},void 0,_.default.Messages.LOGIN))},u.renderVerifySucceeded=function(){return S(v.default,{},void 0,S(v.Image,{src:n(9394),className:(0,o.default)(E.default.image,I.default.marginBottom20)}),S(v.Title,{className:I.default.marginBottom40},void 0,_.default.Messages.VERIFICATION_VERIFIED),S(v.Button,{onClick:this.handleOpenApp},void 0,_.default.Messages.VERIFICATION_OPEN_DISCORD))},u.renderVerifying=function(){return S(v.default,{},void 0,S(v.Image,{src:n(9390),className:(0,o.default)(E.default.image,I.default.marginBottom20)}),S(v.Title,{className:I.default.marginBottom8},void 0,_.default.Messages.VERIFICATION_VERIFYING),S(v.SubTitle,{className:I.default.marginBottom40},void 0,_.default.Messages.ACTION_MAY_TAKE_A_MOMENT),S(v.Button,{submitting:!0,color:v.Button.Colors.PRIMARY}))},u.render=function(){var e=this.props,t=e.verifyErrors,n=e.verifyFailed,r=e.verifySucceeded;return null!=t&&t.captcha_key?this.renderVerifyCaptcha():n?this.renderVerifyFailed():r?this.renderVerifySucceeded():this.renderVerifying()},a}(a.PureComponent);A.displayName="VerifyEmail",A.defaultProps={transitionTo:function(t){return e.location.assign(t)}};var b=u.default.connectStores([c.default],(function(){return{verifyFailed:c.default.didVerifyFail(),verifyErrors:c.default.getVerifyErrors(),verifySucceeded:c.default.didVerifySucceed(),fingerprint:c.default.getFingerprint(),verifyingUserId:c.default.getVerifyingUserId()}}))(A);t.default=b}).call(this,n(35))},10538:function(e,t,n){e.exports=n.p+"1a06a76c7ea3e0facf0d6635e10c5898.svg"},5046:function(e,t,n){"use strict";var r=n(5270),a=n(351),o=n(5271);function i(e,t){return t.encode?t.strict?r(e):encodeURIComponent(e):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=a({arrayFormat:"none"},t)),r=Object.create(null);return"string"!=typeof e?r:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),a=t.shift(),i=t.length>0?t.join("="):void 0;i=void 0===i?null:o(i),n(o(a),i,r)})),Object.keys(r).sort().reduce((function(e,t){var n=r[t];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return t[e]})):t}(n):e[t]=n,e}),Object.create(null))):r},t.stringify=function(e,t){var n=function(e){switch(e.arrayFormat){case"index":return function(t,n,r){return null===n?[i(t,e),"[",r,"]"].join(""):[i(t,e),"[",i(r,e),"]=",i(n,e)].join("")};case"bracket":return function(t,n){return null===n?i(t,e):[i(t,e),"[]=",i(n,e)].join("")};default:return function(t,n){return null===n?i(t,e):[i(t,e),"=",i(n,e)].join("")}}}(t=a({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map((function(r){var a=e[r];if(void 0===a)return"";if(null===a)return i(r,t);if(Array.isArray(a)){var o=[];return a.slice().forEach((function(e){void 0!==e&&o.push(n(r,e,o.length))})),o.join("&")}return i(r,t)+"="+i(a,t)})).filter((function(e){return e.length>0})).join("&"):""}},5060:function(e,t,n){e.exports=n.p+"0f4d1ff76624bb45a3fee4189279ee92.svg"},5065:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=j(n(0)),o=U(n(8)),i=n(5046),u=n(4),l=U(n(319)),s=n(934),f=U(n(5331)),d=U(n(957)),c=U(n(5273)),p=U(n(5150)),v=U(n(5353)),h=U(n(5354)),m=n(5048),g=U(n(10)),_=U(n(969)),E=U(n(5263)),y=U(n(58)),I=j(n(413)),T=U(n(926)),O=n(46),N=U(n(59)),S=U(n(18)),A=n(5301),b=n(109),R=n(349),C=U(n(5302)),M=U(n(5293)),P=j(n(5276)),L=U(n(5360)),w=U(n(5294)),D=n(1),k=U(n(7)),G=U(n(5418)),B=U(n(401));function U(e){return e&&e.__esModule?e:{default:e}}function F(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return F=function(){return e},e}function j(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=F();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function V(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function W(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){W(o,r,a,i,u,"next",e)}function u(e){W(o,r,a,i,u,"throw",e)}i(void 0)}))}}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var K=V(I.AuthSpinner,{}),Y=V(P.InviteResolvingHeader,{}),$=function(e){var t,r;function u(t){var n;(n=e.call(this,t)||this).handleAuthToken=function(){var e=H(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.loginToken(t,!1);case 2:S.default.track(D.AnalyticEvents.LOGIN_SUCCESSFUL,{source:D.LoginSuccessfulSources.QR_CODE,login_source:n.loginSource,gift_code_sku_id:n.giftCodeSKUId,is_new_user:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.setLoginRef=function(e){n.loginRef=e},n.setPasswordRef=function(e){n.passwordRef=e},n.setCodeRef=function(e){n.codeRef=e},n.getFullLogin=function(){var e=n.state;return e.loginPrefix+e.login},n.renderError=function(e){var t=n.props.errors;if(n.hasError(e)){var r=t[e];return Array.isArray(r)?r[0]:r}return null},n.handleLogin=function(e){var t=n.state,r=t.password,a=t.captchaKey,o=t.undelete;null!=e&&e.preventDefault(),n.setState({captchaCallback:n.handleLogin}),l.default.login({login:n.getFullLogin(),password:r,undelete:o,captchaKey:a,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId}),b.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)},n.handleIPAuthorize=function(){var e=H(regeneratorRuntime.mark((function e(t){var r,a,o,i,u,s,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.state,a=r.password,o=r.captchaKey,i=r.undelete,n.setState({phoneVerifyError:null}),u=n.getFullLogin(),e.prev=3,e.next=6,p.default.verifyPhone(u,t,!1);case 6:return s=e.sent,f=s.token,e.next=10,l.default.authorizeIPAddress(f);case 10:l.default.login({login:u,password:a,undelete:i,captchaKey:o,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId}),b.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),null!=e.t0.body&&null!=e.t0.body.message&&n.setState({phoneVerifyError:e.t0.body.message});case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),n.handlePasswordReset=function(){var e=H(regeneratorRuntime.mark((function e(t){var r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.props.transitionTo,n.setState({phoneVerifyError:null}),e.prev=2,e.next=5,p.default.verifyPhone(n.getFullLogin(),t,!1);case 5:a=e.sent,o=a.token,r(D.Routes.RESET,{search:(0,i.stringify)({token:o,from_login:"true"})}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),null!=e.t0.body&&null!=e.t0.body.message&&n.setState({phoneVerifyError:e.t0.body.message});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),n.handleTokenSubmit=function(e){var t=n.state.code,r=n.props.mfaTicket;null!=e&&e.preventDefault(),l.default.loginMFA({code:t.replace(/ /g,""),ticket:r,source:n.loginSource,giftCodeSKUId:n.giftCodeSKUId}),b.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)},n.handleSMSTokenSubmit=function(e){var t=n.state.smsCode,r=n.props.mfaTicket;null!=e&&e.preventDefault(),l.default.loginSMS({code:t.replace(/ /g,""),ticket:r}),b.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)},n.handleToggleSMSLogin=function(e){var t=n.props.mfaTicket;null!=e&&e.preventDefault(),l.default.requestSMSToken(t),b.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)},n.handleForgotPassword=function(){var e=H(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=t&&t.preventDefault(),null!=n.loginRef&&n.loginRef.focus(),r=n.getFullLogin(),n.setState({captchaCallback:n.handleForgotPassword}),e.prev=4,b.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE),e.next=8,l.default.forgotPasswordLogin(r,n.state.captchaKey);case 8:(0,O.openModal)((function(e){return a.createElement(T.default,x({header:k.default.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_HEADER,confirmText:k.default.Messages.OKAY,confirmButtonColor:I.Button.Colors.BRAND,className:R.isMobile?G.default.mobile:""},e),V(N.default,{size:N.default.Sizes.SIZE_16},void 0,k.default.Messages.EMAIL_VERIFICATION_INSTRUCTIONS_BODY.format({email:r})))})),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(4);case 13:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),n.handleResendCode=function(){p.default.resendCode(n.getFullLogin())},n.handleReset=function(e){null!=e&&e.preventDefault(),l.default.loginReset(),n.setState({password:"",loginPrefix:"",login:"",code:"",smsCode:"",captchaKey:null,undelete:!1,checkingHandoff:!1})},n.handleCancelAccountDeletion=function(){n.setState({undelete:!0},n.handleLogin)},n.handleCaptchaVerify=function(e){var t=n.state.captchaCallback;n.setState({captchaKey:e},t)},n.handleGotoRegister=function(){var e=n.state.login,t=n.props,r=t.invite,a=t.giftCode,o=t.closeLogin,u=t.openRegister,s=t.guildTemplate,f=t.location,d=t.transitionTo,c=t.redirectTo;if(t.isGuest)return void 0!==o&&o(),void(void 0!==u&&u());var p,v=null!=f?(0,i.parse)(f.search):{};""!==e&&(v.email=e),null!=r?(v.mode="register",p=D.Routes.INVITE(r.code)):null!=a?(v.mode="register",p=D.Routes.GIFT_CODE(a.code)):null!=s?p=D.Routes.GUILD_TEMPLATE(s.code):null!=c?(p=D.Routes.REGISTER,v.redirect_to=c):p=D.Routes.REGISTER,l.default.loginReset(),d(p,{search:(0,i.stringify)(v)}),b.ComponentDispatch.dispatch(D.ComponentActions.WAVE_EMPHASIZE)};var r=null!=t.location?(0,i.parse)(t.location.search):{};return n.state={redirecting:t.authenticated,checkingHandoff:t.handoffAvailable,loginPrefix:"",login:r.email||r.login||"",password:"",code:"",smsCode:"",captchaKey:null,captchaCallback:n.handleLogin,undelete:!1,phoneVerifyError:null},n}r=e,(t=u).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,u.getDerivedStateFromProps=function(e){var t=e.handoffAvailable,n=e.authenticated;return t||n?null:{checkingHandoff:!1}};var v,_,E,U=u.prototype;return U.componentDidMount=function(){var e=this.props,t=e.handoffAvailable,n=e.authenticated,r=e.giftCodeSKU,a=e.invite,o=e.location;t&&!n?(0,s.handoffBegin)():n&&this.loginOrSSO(n,o,!0),S.default.track(D.AnalyticEvents.LOGIN_VIEWED,x({location:null!=a?"Invite Login Page":"Non-Invite Login Page",login_source:this.loginSource},null!=r?(0,d.default)(r,!1,!1):{}),{flush:!0}),l.default.getLocationMetadata(),(0,m.trackAppUIViewed)("login")},U.componentDidUpdate=function(e){var t,n=this.props,r=n.authenticated,a=n.location,o=this.state.checkingHandoff;if(!r||e.authenticated||o||this.loginOrSSO(r,a),e.errors!==this.props.errors)if(this.hasError("password"))null===(t=this.passwordRef)||void 0===t||t.focus();else if(this.hasError("email")||this.hasError("login")){var i;null===(i=this.loginRef)||void 0===i||i.focus()}else if(this.hasError("code")){var u;null===(u=this.codeRef)||void 0===u||u.focus()}},U.loginOrSSO=function(e,t,n){var r=this;void 0===n&&(n=!1);var a=this.props.isGuest;e&&(null!=t||a)&&(n?l.default.verifySSOToken().then((function(){return r.transitionSSO(t)})):this.transitionSSO(t))},U.transitionSSO=function(e){var t=this.props,n=t.transitionTo,r=t.redirectTo;if(t.isGuest&&null!=r)n(r);else{var a=null!=e?(0,i.parse)(e.search):{},o=(a.redirect_to,function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(a,["redirect_to"]));if(null!=r)n(r);else if(null==o.service)n(D.Routes.APP);else{var u=window.location.protocol+window.GLOBAL_ENV.API_ENDPOINT+D.Endpoints.SSO,l=x({},o,{token:g.default.getToken()});window.location=u+"?"+(0,i.stringify)(l)}}},U.hasError=function(e){return null!=this.props.errors[e]},U.renderHandOffAvailable=function(){var e=this.props.authBoxClassName;return V(I.default,{className:e},void 0,K,V(I.Title,{className:B.default.marginBottom8},void 0,k.default.Messages.BROWSER_HANDOFF_DETECTING_TITLE),V(I.SubTitle,{},void 0,k.default.Messages.AUTH_BROWSER_HANDOFF_DETECTING_DESCRIPTION))},U.renderHandOffContinue=function(){var e=this.props,t=e.user,n=e.transitionTo,r=e.authBoxClassName;return null==t?null:V(I.default,{className:r},void 0,V(I.Avatar,{src:t.getAvatarURL(),size:I.Avatar.Sizes.DEPRECATED_SIZE_100,className:B.default.marginBottom20}),V(I.Title,{className:B.default.marginBottom8},void 0,k.default.Messages.BROWSER_HANDOFF_SUCCESS_TITLE.format({name:t.toString()})),V(I.SubTitle,{className:B.default.marginBottom40},void 0,k.default.Messages.BROWSER_HANDOFF_SUCCESS_BODY),V(I.Block,{},void 0,V(I.Button,{onClick:function(){return n(D.Routes.APP)},className:B.default.marginBottom8},void 0,k.default.Messages.BROWSER_HANDOFF_SUCCESS_ACTION.format({name:t.toString()})),V(I.Button,{look:I.Button.Looks.LINK,onClick:this.handleReset},void 0,k.default.Messages.BROWSER_HANDOFF_SUCCESS_CANCEL)))},U.renderDisabledAccount=function(){var e=this.props.authBoxClassName,t=this.props.loginStatus===D.LoginStates.ACCOUNT_DISABLED,n=t?k.default.Messages.ACCOUNT_DISABLED_TITLE:k.default.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_TITLE,r=t?k.default.Messages.ACCOUNT_DISABLED_DESCRIPTION:k.default.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_DESCRIPTION;return V(I.default,{tag:"form",onSubmit:this.handleReset,className:e},void 0,V(I.Title,{className:B.default.marginBottom8},void 0,n),V(I.SubTitle,{className:B.default.marginBottom20},void 0,r),V(I.Block,{},void 0,V(I.Button,{color:I.Button.Colors.BRAND,type:"submit"},void 0,k.default.Messages.RETURN_TO_LOGIN),V("div",{className:(0,o.default)(B.default.marginTop8,G.default.needAccount)},void 0,k.default.Messages.ACCOUNT_SCHEDULED_FOR_DELETION_CANCEL.format({onClick:this.handleCancelAccountDeletion}))))},U.renderResolving=function(){var e=this,t=this.props,n=t.authBoxClassName,r=t.country;return V(I.default,{className:n},void 0,Y,V(I.Block,{className:B.default.marginTop20},void 0,V(h.default,{className:B.default.marginBottom20,alpha2:r.alpha2,countryCode:r.code.split(" ")[0],label:k.default.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER,onChange:function(t,n){return e.setState({login:t,loginPrefix:n})},setRef:this.setLoginRef,autoComplete:"off",spellCheck:"false",value:this.state.login,autoFocus:!0}),V(I.Input,{className:B.default.marginBottom20,label:k.default.Messages.FORM_LABEL_PASSWORD,onChange:function(t){return e.setState({password:t})},type:"password",setRef:this.setPasswordRef,autoComplete:"off",spellCheck:"false",value:this.state.password}),V(I.Button,{className:B.default.marginBottom8,type:"submit",disabled:!0},void 0,k.default.Messages.LOGIN),V(I.Button,{disabled:!0,look:I.Button.Looks.LINK},void 0,k.default.Messages.FORGOT_PASSWORD),V(I.Button,{disabled:!0,className:B.default.marginTop4,look:I.Button.Looks.LINK},void 0,k.default.Messages.NEED_ACCOUNT)))},U.renderDefaultForm=function(e){var t,n,r=this,i=this.props,u=i.invite,l=i.giftCode,s=i.loginStatus,f=i.isGuest,d=i.country,c=!this.hasError("email")&&this.hasError("password");return n=null!=u&&null!=u.channel?V(P.default,{invite:u}):null!=l?V(M.default,{giftCode:l}):f?null:V(a.Fragment,{},void 0,V(I.Title,{className:B.default.marginBottom8},"title",k.default.Messages.LOGIN_TITLE),V(I.SubTitle,{},"subtitle",k.default.Messages.AUTH_LOGIN_BODY)),V(y.default,{direction:y.default.Direction.HORIZONTAL,align:y.default.Align.CENTER},void 0,V("div",{className:G.default.mainLoginContainer},void 0,n,V(I.Block,{className:B.default.marginTop20},void 0,V(h.default,{alpha2:d.alpha2,countryCode:d.code.split(" ")[0],className:B.default.marginBottom20,label:k.default.Messages.FORM_LABEL_EMAIL_OR_PHONE_NUMBER,error:null!==(t=this.renderError("login"))&&void 0!==t?t:this.renderError("email"),onChange:function(e,t){return r.setState({login:e,loginPrefix:t})},setRef:this.setLoginRef,autoComplete:"off",spellCheck:"false",value:this.state.login,autoFocus:!c}),V(I.Input,{label:k.default.Messages.FORM_LABEL_PASSWORD,error:this.renderError("password"),onChange:function(e){return r.setState({password:e})},name:"password",type:"password",setRef:this.setPasswordRef,autoComplete:"off",spellCheck:"false",autoFocus:c,value:this.state.password}),V(I.Button,{onClick:this.handleForgotPassword,look:I.Button.Looks.LINK,className:(0,o.default)(B.default.marginBottom20,B.default.marginTop4)},void 0,k.default.Messages.FORGOT_PASSWORD),V(I.Button,{type:"submit",submitting:s===D.LoginStates.LOGGING_IN,className:B.default.marginBottom8},void 0,k.default.Messages.LOGIN),V("div",{className:B.default.marginTop4},void 0,V("span",{className:G.default.needAccount},void 0,k.default.Messages.NEED_ACCOUNT),V(I.Button,{onClick:this.handleGotoRegister,look:I.Button.Looks.LINK,className:G.default.smallRegisterLink},void 0,k.default.Messages.REGISTER)))),e?V(L.default,{authTokenCallback:this.handleAuthToken}):null)},U.renderDefault=function(){var e=this.props,t=e.authBoxClassName,n=e.isGuest;return V("div",{className:G.default.pageContainer},void 0,V(I.default,{onSubmit:this.handleLogin,tag:"form",className:t,expanded:!0},void 0,this.renderDefaultForm(!n)))},U.renderGuildTemplate=function(e){var t=this,n=V(c.default,{guildTemplate:e});return V(w.default,{onSubmit:this.handleLogin,tag:"form",className:(0,o.default)(this.props.authBoxClassName,G.default.horizontalAuthBox)},void 0,(function(){return[n,t.renderDefaultForm(!1)]}))},U.renderMFA=function(){var e=this,t=this.props,r=t.loginStatus,a=t.mfaSMS,o=t.authBoxClassName;return V(I.default,{onSubmit:this.handleTokenSubmit,tag:"form",className:o},void 0,V("img",{alt:"",src:n(5060),className:B.default.marginBottom20}),V(I.Title,{className:B.default.marginBottom8},void 0,k.default.Messages.TWO_FA),V(I.SubTitle,{},void 0,k.default.Messages.TWO_FA_ENTER_TOKEN_BODY),V(I.Block,{className:B.default.marginTop40},void 0,V(I.Input,{className:B.default.marginBottom20,error:this.renderError("code"),setRef:this.setCodeRef,onChange:function(t){return e.setState({code:t})},autoComplete:"off",placeholder:k.default.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,label:k.default.Messages.TWO_FA_ENTER_TOKEN_LABEL,value:this.state.code},"totpCode"),V(I.Button,{type:"submit",submitting:r===D.LoginStates.LOGGING_IN_MFA},void 0,k.default.Messages.LOGIN),a?V(I.Button,{onClick:this.handleToggleSMSLogin,submitting:r===D.LoginStates.LOGGING_IN_MFA_SMS,className:B.default.marginTop8,look:I.Button.Looks.LINK},void 0,k.default.Messages.MFA_SMS_RECEIVE_CODE):null,V(I.Button,{look:I.Button.Looks.LINK,className:B.default.marginTop4,onClick:this.handleReset},void 0,k.default.Messages.TWO_FA_LOGIN_FOOTER)))},U.renderMFASMS=function(){var e=this,t=this.props,r=t.loginStatus,a=t.maskedPhone,o=t.authBoxClassName,i=r===D.LoginStates.LOGGING_IN_MFA_SMS||""===a;return V(I.default,{onSubmit:this.handleSMSTokenSubmit,tag:"form",className:o},void 0,V("img",{alt:"",src:n(5060),className:B.default.marginBottom20}),V(I.Title,{className:B.default.marginBottom8},void 0,k.default.Messages.TWO_FA),V(I.SubTitle,{className:B.default.marginBottom8},void 0,i?k.default.Messages.TWO_FA_ENTER_SMS_TOKEN_SENDING:k.default.Messages.TWO_FA_ENTER_SMS_TOKEN_SENT.format({phoneNumber:a})),V(I.Block,{className:B.default.marginTop40},void 0,V(I.Input,{className:B.default.marginBottom20,error:this.renderError("code"),setRef:this.setCodeRef,onChange:function(t){return e.setState({smsCode:t})},autoComplete:"off",placeholder:k.default.Messages.TWO_FA_AUTH_CODE,spellCheck:"false",maxLength:10,autoFocus:!0,label:k.default.Messages.TWO_FA_ENTER_SMS_TOKEN_LABEL,value:this.state.smsCode},"smsCode"),V(I.Button,{type:"submit",submitting:i,color:i?I.Button.Colors.TRANSPARENT:I.Button.Colors.BRAND},void 0,k.default.Messages.LOGIN),i?null:V(I.Button,{onClick:this.handleToggleSMSLogin,className:B.default.marginTop8,look:I.Button.Looks.LINK},void 0,k.default.Messages.MFA_SMS_RESEND),V(I.Button,{look:I.Button.Looks.LINK,className:B.default.marginTop4,onClick:this.handleReset},void 0,k.default.Messages.TWO_FA_LOGIN_FOOTER)))},U.renderIPAuthorization=function(){var e=this.props.authBoxClassName,t=this.state.phoneVerifyError;return V(I.default,{tag:"form",className:e},void 0,V(f.default,{title:k.default.Messages.PHONE_IP_AUTHORIZATION_TITLE,subtitle:k.default.Messages.PHONE_IP_AUTHORIZATION_SUBTITLE_RESEND.format({onResendClick:this.handleResendCode}),error:t,onSubmit:this.handleIPAuthorize,onCancel:l.default.loginReset}))},U.renderPasswordRecovery=function(){var e=this.props.authBoxClassName,t=this.state.phoneVerifyError;return V(I.default,{tag:"form",className:e},void 0,V(f.default,{title:k.default.Messages.PASSWORD_RECOVERY_VERIFY_PHONE_TITLE,subtitle:k.default.Messages.PASSWORD_RECOVERY_VERIFY_PHONE_SUBTITLE_RESEND.format({onResendClick:this.handleResendCode}),error:t,onSubmit:this.handlePasswordReset,onCancel:l.default.loginReset}))},U.render=function(){var e=this.props,t=e.authenticated,n=e.invite,r=e.guildTemplate,a=e.loginStatus,o=e.handoffAvailable,i=e.isGuest,u=e.authBoxClassName,l=e.errors,s=l.captcha_sitekey,f=l.captcha_service,d=this.state,c=d.checkingHandoff;if(d.redirecting)return null;if(this.hasError("captcha_key"))return V(C.default,{authBoxClassName:u,onVerify:this.handleCaptchaVerify,title:i?null:k.default.Messages.LOGIN_TITLE,sitekey:s,captchaService:(0,A.parseCaptchaType)(f)});if(o)return this.renderHandOffAvailable();if(t&&c)return this.renderHandOffContinue();switch(a){case D.LoginStates.LOGGING_IN_MFA_SMS:case D.LoginStates.MFA_SMS_STEP:return this.renderMFASMS();case D.LoginStates.LOGGING_IN_MFA:case D.LoginStates.MFA_STEP:return this.renderMFA();case D.LoginStates.ACCOUNT_SCHEDULED_FOR_DELETION:case D.LoginStates.ACCOUNT_DISABLED:return this.renderDisabledAccount();case D.LoginStates.PHONE_IP_AUTHORIZATION:return this.renderIPAuthorization();case D.LoginStates.PASSWORD_RECOVERY_PHONE_VERIFICATION:return this.renderPasswordRecovery();case D.LoginStates.LOGGING_IN:case D.LoginStates.NONE:default:return null!=n&&n.state===D.InviteStates.RESOLVING?this.renderResolving():null!=r?r.state===D.InviteStates.RESOLVING?this.renderResolving():this.renderGuildTemplate(r):this.renderDefault()}},v=u,(_=[{key:"loginSource",get:function(){var e=this.props,t=e.giftCode,n=e.guildTemplate,r=e.invite,a=e.isGuest;return null!=t?"gift":null!=n?"guild_template":null!=r?null!=r.guild?"guild_invite":"dm_invite":a?"guest_lurker":null}},{key:"giftCodeSKUId",get:function(){var e=this.props.giftCode;return null!=e?e.skuId:null}}])&&z(v.prototype,_),E&&z(v,E),u}(a.PureComponent);function Z(e){var t=(0,u.useStateFromStoresObject)([_.default,E.default,g.default,v.default],(function(){return{authenticated:g.default.isAuthenticated(),handoffAvailable:_.default.isHandoffAvailable(),user:_.default.user,loginStatus:g.default.getLoginStatus(),mfaTicket:g.default.getMFATicket(),mfaSMS:g.default.getMFASMS(),maskedPhone:g.default.getMaskedPhone(),errors:g.default.getErrors(),defaultRoute:E.default.defaultRoute,country:v.default.getCountryCode()}}));return a.createElement($,x({},e,t))}$.displayName="Login",$.defaultProps={isGuest:!1,transitionTo:function(t){return e.location.assign(t)}},Z.displayName="ConnectedLogin";var q=Z;t.default=q}).call(this,n(35))},5073:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=V(n(0)),o=n(5046),i=n(253),u=j(n(4)),l=j(n(2)),s=j(n(319)),f=V(n(5268)),d=j(n(985)),c=j(n(959)),p=j(n(8237)),v=j(n(10)),h=j(n(323)),m=j(n(7567)),g=j(n(958)),_=j(n(18)),E=n(361),y=n(966),I=j(n(167)),T=j(n(10520)),O=n(974),N=n(349),S=j(n(5456)),A=j(n(5457)),b=j(n(10521)),R=j(n(10524)),C=j(n(10526)),M=j(n(10527)),P=j(n(10528)),L=j(n(10532)),w=j(n(10534)),D=j(n(5065)),k=j(n(5467)),G=j(n(7739)),B=j(n(10536)),U=j(n(10537)),F=n(1);function j(e){return e&&e.__esModule?e:{default:e}}function x(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return x=function(){return e},e}function V(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=x();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function W(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n(8468),u.default.initialize();var z=(0,S.default)(D.default),K=(0,S.default)(k.default),Y=(0,S.default)(L.default),$=(0,S.default)(M.default),Z=(0,S.default)(C.default),q=(0,S.default)(w.default),Q=(0,S.default)(G.default),J=(0,S.default)(b.default),X=(0,S.default)(U.default),ee=(0,S.default)(B.default),te=(0,S.default)(R.default),ne=function(e){var t,n;function r(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={splash:null,redirectTo:null,backgroundId:null},t}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.getDerivedStateFromProps=function(e,t){var n=e.invite,r=e.location,a=t.backgroundId,i=(0,o.parse)(r.search).redirect_to||null;null!=i&&(0,O.isSafeRedirect)(i)&&!i.startsWith(F.Routes.ME)||(i=null);var u=null;if(null==n)u=(0,y.getArtForPath)(i);else if((null==n?void 0:n.state)===F.InviteStates.RESOLVED){var l=n.guild,s=n.target_application;null!=s?null!=a&&(u=(0,E.getAssetImage)(s.id,a,1024)):null!=l&&"string"==typeof l.splash&&(u=I.default.getGuildSplashURL({id:l.id,splash:l.splash}))}return{redirectTo:i,splash:u}};var u=r.prototype;return u.componentDidMount=function(){var e=this.props,t=e.inviteCode,n=e.hasLoadedExperiments,r=e.isAuthenticated,a=e.isGuestAuthenticated;null!=t&&(n||!r&&!a||s.default.getExperiments(),_.default.track(F.AnalyticEvents.INVITE_OPENED,{invite_code:t,load_time:T.default.getTimeSinceNavigationStart()},{flush:!0})),n&&this.resolveInvite(),this.resolveGiftCode(),this.resolveGuildTemplate()},u.componentDidUpdate=function(e){var t,n;!e.hasLoadedExperiments&&this.props.hasLoadedExperiments&&this.resolveInvite(),(null===(t=e.invite)||void 0===t?void 0:t.state)!==(null===(n=this.props.invite)||void 0===n?void 0:n.state)&&this.maybeFetchApplicationSplash()},u.maybeFetchApplicationSplash=function(){var e=this,t=this.props.invite;if((null==t?void 0:t.state)===F.InviteStates.RESOLVED){var n=t.target_application;null!=n&&(0,E.getAssetIds)(n.id,["embedded_splash"]).then((function(t){var n=t[0];return e.setState({backgroundId:n})}))}},u.resolveInvite=function(){var e=this.props.inviteCode;null!=e&&(d.default.resolveInvite(e,F.PageAnalyticsLocations.INVITE),d.default.openNativeAppModal(e))},u.resolveGuildTemplate=function(){var e=this.props.guildTemplateCode;null!=e&&(_.default.track(F.AnalyticEvents.GUILD_TEMPLATE_OPENED,{guild_template_code:e,load_time:T.default.getTimeSinceNavigationStart()},{flush:!0}),p.default.resolveGuildTemplate(e),p.default.openNativeAppModal(e))},u.resolveGiftCode=function(){var e=this.props.giftCode;null!=e&&(f.resolveGiftCode(e,!0,!0),l.default.wait((function(){return f.openNativeGiftCodeModal(e)})))},u.render=function(){var e=this.state,t=e.splash,n=e.redirectTo;return W(A.default,{splash:t,redirectTo:n},void 0,W(i.Route,{path:F.Routes.LOGIN_HANDOFF,render:function(e){return a.createElement(K,H({},e,{redirectTo:n}))}}),W(i.Route,{path:F.Routes.LOGIN,render:function(e){return a.createElement(z,H({},e,{redirectTo:n}))}}),W(i.Route,{path:F.Routes.REGISTER,render:function(e){return a.createElement(Q,H({},e,{redirectTo:n}))}}),W(i.Route,{path:F.Routes.GIFT_CODE_LOGIN(":giftCode"),render:function(e){return a.createElement(Z,H({login:!0},e))}}),W(i.Route,{path:F.Routes.GIFT_CODE(":giftCode"),render:function(e){return a.createElement(Z,e)}}),W(i.Route,{path:[F.Routes.INVITE_LOGIN(":inviteCode"),F.Routes.INVITE(":inviteCode")],render:function(e){var t=e.match,n=t.params.inviteCode,r=t.path,a=e.location,o=e.transitionTo;return N.isMobile||N.isTablet?W(q,{inviteCode:n},n):W(Y,{inviteCode:n,location:a,transitionTo:o,login:r===F.Routes.INVITE_LOGIN(":inviteCode")})}}),W(i.Route,{path:[F.Routes.GUILD_TEMPLATE_LOGIN(":guildTemplateCode"),F.Routes.GUILD_TEMPLATE(":guildTemplateCode")],render:function(e){var t=e.match,n=t.params.guildTemplateCode,r=t.path,a=e.location,o=e.transitionTo;return N.isMobile||N.isTablet?W(P.default,{code:n},n):W($,{code:n,location:a,transitionTo:o,login:r===F.Routes.GUILD_TEMPLATE_LOGIN(":guildTemplateCode")})}}),W(i.Route,{path:F.Routes.VERIFY,render:function(e){return a.createElement(X,e)}}),W(i.Route,{path:F.Routes.DISABLE_EMAIL_NOTIFICATIONS,render:function(e){return a.createElement(te,e)}}),W(i.Route,{path:F.Routes.AUTHORIZE_IP,render:function(e){return a.createElement(J,e)}}),W(i.Route,{path:F.Routes.RESET,render:function(e){return a.createElement(ee,e)}}))},r}(a.PureComponent);ne.displayName="ViewsWithAuth";var re=u.default.connectStores([v.default,g.default,m.default,h.default,c.default],(function(e){var t,n,r,a=e.match,o=null==a||null===(t=a.params)||void 0===t?void 0:t.inviteCode,i=null==a||null===(n=a.params)||void 0===n?void 0:n.giftCode,u=null==a||null===(r=a.params)||void 0===r?void 0:r.guildTemplateCode;return{inviteCode:o,isAuthenticated:v.default.isAuthenticated(),isGuestAuthenticated:v.default.isGuest(),giftCode:i,guildTemplateCode:u,gift:null!=i?m.default.get(i):null,invite:null!=o?g.default.getInvite(o):null,guildTemplate:null!=u?c.default.getGuildTemplate(u):null,hasLoadedExperiments:h.default.hasLoadedExperiments}}))(ne);t.default=re},5270:function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},5271:function(e,t,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),a=new RegExp("(%[a-f0-9]{2})+","gi");function o(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],o(n),o(r))}function i(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=a.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var r=i(n[0]);r!==n[0]&&(t[n[0]]=r)}n=a.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),u=0;u<o.length;u++){var l=o[u];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},5276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.InviteResolvingHeader=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=E();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=n(424),i=_(n(322)),u=_(n(41)),l=_(n(225)),s=_(n(143)),f=_(n(418)),d=_(n(5136)),c=_(n(317)),p=n(413),v=_(n(59)),h=n(1),m=_(n(7)),g=_(n(5414));function _(e){return e&&e.__esModule?e:{default:e}}function E(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return E=function(){return e},e}function y(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var I=function(){return y(a.Fragment,{},void 0,y(p.Avatar,{src:null,size:p.Avatar.Sizes.DEPRECATED_SIZE_100,className:g.default.avatar}),y(p.SubTitle,{},void 0,m.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN),y(p.Title,{className:g.default.inviteResolvingGuildName},void 0,m.default.Messages.LOADING))};t.InviteResolvingHeader=I,I.displayName="InviteResolvingHeader";var T=function(e){var t=e.guild,n=e.user,r=e.application;return r?y(f.default,{className:g.default.appIcon,game:r,size:g.default.appIconSize}):n?y(p.Avatar,{src:null!=n?n.getAvatarURL():null,size:p.Avatar.Sizes.DEPRECATED_SIZE_100,className:g.default.avatar}):t?y(p.GuildIcon,{guild:t,size:p.GuildIcon.Sizes.XLARGE,className:g.default.guildIcon,animate:!0}):null},O=function(e){var t=e.invite,n=e.disableUser,r=void 0!==n&&n,f=e.error,_=e.description,E=e.flatActivityCount,I=void 0!==E&&E;if(null==t)return null;var O,N,S,A=null!=t.guild?new l.default(t.guild):null,b=null!=t.channel?new u.default(t.channel):null,R=null!=t.target_application?new i.default(t.target_application):null,C=r||null==t.inviter?null:new s.default(t.inviter),M=!(null!=t.approximate_member_count&&t.approximate_member_count>100||null!=A&&A.hasFeature(h.GuildFeatures.COMMUNITY))&&C,P=null;if(null!=A)P=null==C?m.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN:m.default.Messages.AUTH_MESSAGE_INVITED_BY.format({username:C.username}),t.target_type===o.InviteTargetTypes.STREAM&&null!=t.target_user&&(P=m.default.Messages.AUTH_MESSAGE_INVITED_TO_STREAM.format({username:t.target_user.username})),t.target_type===o.InviteTargetTypes.EMBEDDED_APPLICATION&&null!=t.target_application&&(P=null!=C?m.default.Messages.AUTH_MESSAGE_INVITED_TO_PLAY_USERNAME.format({username:C.username}):m.default.Messages.AUTH_MESSAGE_INVITED_TO_PLAY),M&&null==R&&(O=y(p.GuildIcon,{guild:A,size:p.GuildIcon.Sizes.SMALL})),N=A.name,null!=R&&(N=R.name,null==_&&(S=y("div",{},void 0,y(p.SubTitle,{className:g.default.appIn},void 0,m.default.Messages.EMBEDDED_ACTIVITIES_INVITE_IN),y("div",{className:g.default.guildContainer},void 0,y(p.GuildIcon,{guild:A,size:p.GuildIcon.Sizes.SMALL}),y(v.default,{className:g.default.appGuildName,color:v.default.Colors.CUSTOM,tag:"span",size:v.default.Sizes.SIZE_24},void 0,A.name)))));else if(null!=b){if(null==C)throw new Error("no inviter in group DM invite");var L=C.username;b.name?(P=m.default.Messages.AUTH_MESSAGE_INVITED_BY.format({username:L}),N=b.name,null!=b.icon&&(O=y(p.ChannelIcon,{channel:b,size:p.Avatar.Sizes.SIZE_32}))):(P=m.default.Messages.INSTANT_INVITE_YOU_HAVE_BEEN_INVITED_TO_JOIN_GROUP_DM,N=L)}return y("div",{},void 0,y(T,{application:R,guild:A,user:M?C:null}),f?a.createElement(a.Fragment,null,y(p.SubTitle,{},void 0,m.default.Messages.INVITE_MODAL_ERROR_TITLE),y(p.Title,{},void 0,f)):a.createElement(a.Fragment,null,y(p.SubTitle,{},void 0,P),y(p.Title,{className:g.default.title},void 0,null!=A?y(d.default,{guild:A,className:g.default.guildBadge,tooltipPosition:c.default.Positions.LEFT}):null,O,N)),_&&y("p",{className:g.default.description},void 0,_),S,null==R?y(p.ActivityCount,{className:g.default.activityCount,online:t.approximate_presence_count,total:t.approximate_member_count,flat:I}):null)};O.displayName="InviteHeader";var N=O;t.default=N},5293:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.GiftCodeResolvingHeader=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=E();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=_(n(8)),i=_(n(4)),u=_(n(54)),l=_(n(19)),s=_(n(240)),f=_(n(318)),d=_(n(418)),c=n(413),p=n(1),v=_(n(7)),h=_(n(5413)),m=_(n(952)),g=_(n(401));function _(e){return e&&e.__esModule?e:{default:e}}function E(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return E=function(){return e},e}function y(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var I=function(){return y(a.Fragment,{},void 0,y(c.Avatar,{src:null,size:c.Avatar.Sizes.DEPRECATED_SIZE_100,className:g.default.marginBottom20}),y(c.SubTitle,{},void 0,v.default.Messages.GIFT_CODE_AUTH_GIFTED),y(c.Title,{className:(0,o.default)(g.default.marginTop8,m.default.flexCenter)},void 0,v.default.Messages.LOADING))};t.GiftCodeResolvingHeader=I,I.displayName="GiftCodeResolvingHeader";var T=function(e){var t=e.error,n=e.gifter,r=e.sku,i=e.application,u=e.subscriptionPlan,l=null==n?v.default.Messages.GIFT_CODE_AUTH_GIFTED:v.default.Messages.GIFT_CODE_AUTH_GIFTED_BY.format({username:n.username}),s=r.name;return null!=u&&(s=(u.interval===p.SubscriptionIntervalTypes.MONTH?v.default.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_MONTHLY:v.default.Messages.GIFT_CODE_AUTH_GIFTED_SUBSCRIPTION_YEARLY).format({skuName:r.name,intervalCount:u.intervalCount})),y(a.Fragment,{},void 0,y(c.Avatar,{src:null!=n?n.getAvatarURL():null,size:c.Avatar.Sizes.DEPRECATED_SIZE_100,className:g.default.marginBottom20}),null!=t?y(a.Fragment,{},void 0,y(c.SubTitle,{},void 0,v.default.Messages.INVITE_MODAL_ERROR_TITLE),y(c.Title,{},void 0,t)):y(a.Fragment,{},void 0,y(c.SubTitle,{},void 0,l),y(c.Title,{className:(0,o.default)(g.default.marginTop8,m.default.flexCenter)},void 0,y(d.default,{size:d.default.Sizes.MEDIUM,className:h.default.applicationIcon,game:i,skuId:r.id}),s)))};T.displayName="GiftCodeHeader";var O=i.default.connectStores([f.default,u.default,s.default,l.default],(function(e){var t=e.giftCode,n=f.default.get(t.skuId),r=t.subscriptionPlanId;return{sku:n,subscriptionPlan:null!=r?s.default.get(r):null,application:u.default.getGame(n.applicationId),gifter:l.default.getUser(t.userId)}}))(T);t.default=O},5294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=l(n(8)),i=l(n(413)),u=l(n(5417));function l(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function c(e){var t=e.children,n=e.className,r=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["children","className"]),l=t();return a.createElement(i.default,f({},r,{className:(0,o.default)(n,u.default.container),contentClassName:u.default.content}),l.map((function(e,t){return d("div",{className:u.default.column,style:{flexBasis:100/l.length+"%"}},t,e)})))}c.displayName="MultiColumnAuthBox"},5302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;p(n(0));var r,a=n(120),o=d(n(5303)),i=p(n(413)),u=n(1),l=d(n(7)),s=d(n(952)),f=d(n(401));function d(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var h=function(e){var t=e.title,r=e.onVerify,d=e.authBoxClassName,c=e.captchaService,p=void 0===c?u.CaptchaTypes.RECAPTCHA:c,h=e.sitekey;return v(i.default,{className:d},void 0,v("img",{alt:"",src:n(5060),className:f.default.marginBottom20}),null!=t?v(i.Title,{className:f.default.marginBottom8},void 0,t):null,v(i.SubTitle,{className:f.default.marginBottom40},void 0,l.default.Messages.BEEP_BOOP),v("div",{className:s.default.flexCenter},void 0,v(o.default,{onVerify:r,theme:a.ThemeTypes.DARK,captchaService:p,sitekey:h})))};h.displayName="AuthCaptcha";var m=h;t.default=m},5304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sizes=t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=(r=n(5043))&&r.__esModule?r:{default:r},i=n(167);function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){return((0,i.hasAnimatedAvatar)(e)&&t?e.getAvatarURL("gif"):e.avatarURL||e.getAvatarURL("jpg"))||""}var f=a.memo((function(e){var t=e.user,n=e.size,r=void 0===n?o.default.Sizes.SIZE_32:n,i=e.animate,u=void 0!==i&&i,f=e["aria-hidden"],d=void 0!==f&&f,c=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["user","size","animate","aria-hidden"]);return a.createElement(o.default,l({src:s(t,u),size:r,"aria-label":d?void 0:t.username,"aria-hidden":d},c))}));t.default=f;var d=o.default.Sizes;t.Sizes=d},5326:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(0)),a=i(n(5391));function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=r?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(n,a,i):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}var u=function(e){var t,n;function o(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).QRRef=r.createRef(),t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=o.prototype;return i.componentDidMount=function(){new a.default(this.QRRef.current,this.props)},i.componentDidUpdate=function(){new a.default(this.QRRef.current,this.props)},i.render=function(){var e=this.props,t=e.colorLight,n=e.className;return r.createElement("div",{ref:this.QRRef,style:{padding:8,borderRadius:4,background:t},className:n})},o}(r.PureComponent);u.displayName="QRCode",u.defaultProps={width:128,height:128,colorLight:"#ffffff",colorDark:"#000000",correctLevel:a.CorrectLevel.M};var l=u;t.default=l},5331:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=h;!function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n)}(n(0));var r,a=c(n(38)),o=c(n(5298)),i=c(n(58)),u=n(413),l=c(n(59)),s=c(n(7)),f=c(n(5404)),d=c(n(401));function c(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(e){var t=e.title,n=e.subtitle,r=e.error,c=e.onSubmit,p=e.onCancel;return v(i.default,{direction:i.default.Direction.VERTICAL},void 0,v(u.Title,{className:d.default.marginBottom8},void 0,t),v(u.SubTitle,{className:f.default.subTitle},void 0,n),v("div",{},void 0,v(o.default,{inputClassName:f.default.codeInput,onSubmit:c}),null!=r?v(l.default,{className:f.default.error},void 0,r):null),v(a.default,{className:f.default.button,onClick:p,color:a.default.Colors.GREY},void 0,s.default.Messages.CANCEL))}h.displayName="PhoneVerify"},5333:function(e,t,n){"use strict";var r={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0},o="function"==typeof Object.getOwnPropertySymbols;e.exports=function(e,t,n){if("string"!=typeof t){var i=Object.getOwnPropertyNames(t);o&&(i=i.concat(Object.getOwnPropertySymbols(t)));for(var u=0;u<i.length;++u)if(!(r[i[u]]||a[i[u]]||n&&n[i[u]]))try{e[i[u]]=t[i[u]]}catch(e){}}return e}},5334:function(e,t){if(!n)var n={map:function(e,t){var n={};return t?e.map((function(e,r){return n.index=r,t.call(n,e)})):e.slice()},naturalOrder:function(e,t){return e<t?-1:e>t?1:0},sum:function(e,t){var n={};return e.reduce(t?function(e,r,a){return n.index=a,e+t.call(n,r)}:function(e,t){return e+t},0)},max:function(e,t){return Math.max.apply(null,t?n.map(e,t):e)}};var r=function(){function e(e,t,n){return(e<<10)+(t<<5)+n}function t(e){var t=[],n=!1;function r(){t.sort(e),n=!0}return{push:function(e){t.push(e),n=!1},peek:function(e){return n||r(),void 0===e&&(e=t.length-1),t[e]},pop:function(){return n||r(),t.pop()},size:function(){return t.length},map:function(e){return t.map(e)},debug:function(){return n||r(),t}}}function r(e,t,n,r,a,o,i){this.r1=e,this.r2=t,this.g1=n,this.g2=r,this.b1=a,this.b2=o,this.histo=i}function a(){this.vboxes=new t((function(e,t){return n.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())}))}function o(t,r){if(r.count()){var a=r.r2-r.r1+1,o=r.g2-r.g1+1,i=r.b2-r.b1+1,u=n.max([a,o,i]);if(1==r.count())return[r.copy()];var l,s,f,d,c=0,p=[],v=[];if(u==a)for(l=r.r1;l<=r.r2;l++){for(d=0,s=r.g1;s<=r.g2;s++)for(f=r.b1;f<=r.b2;f++)d+=t[e(l,s,f)]||0;c+=d,p[l]=c}else if(u==o)for(l=r.g1;l<=r.g2;l++){for(d=0,s=r.r1;s<=r.r2;s++)for(f=r.b1;f<=r.b2;f++)d+=t[e(s,l,f)]||0;c+=d,p[l]=c}else for(l=r.b1;l<=r.b2;l++){for(d=0,s=r.r1;s<=r.r2;s++)for(f=r.g1;f<=r.g2;f++)d+=t[e(s,f,l)]||0;c+=d,p[l]=c}return p.forEach((function(e,t){v[t]=c-e})),h(u==a?"r":u==o?"g":"b")}function h(e){var t,n,a,o,i,u=e+"1",s=e+"2",f=0;for(l=r[u];l<=r[s];l++)if(p[l]>c/2){for(a=r.copy(),o=r.copy(),i=(t=l-r[u])<=(n=r[s]-l)?Math.min(r[s]-1,~~(l+n/2)):Math.max(r[u],~~(l-1-t/2));!p[i];)i++;for(f=v[i];!f&&p[i-1];)f=v[--i];return a[s]=i,o[u]=a[s]+1,[a,o]}}}return r.prototype={volume:function(e){return this._volume&&!e||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},count:function(t){var n=this.histo;if(!this._count_set||t){var r,a,o,i=0;for(r=this.r1;r<=this.r2;r++)for(a=this.g1;a<=this.g2;a++)for(o=this.b1;o<=this.b2;o++)i+=n[e(r,a,o)]||0;this._count=i,this._count_set=!0}return this._count},copy:function(){return new r(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},avg:function(t){var n=this.histo;if(!this._avg||t){var r,a,o,i,u=0,l=0,s=0,f=0;for(a=this.r1;a<=this.r2;a++)for(o=this.g1;o<=this.g2;o++)for(i=this.b1;i<=this.b2;i++)u+=r=n[e(a,o,i)]||0,l+=r*(a+.5)*8,s+=r*(o+.5)*8,f+=r*(i+.5)*8;this._avg=u?[~~(l/u),~~(s/u),~~(f/u)]:[~~(8*(this.r1+this.r2+1)/2),~~(8*(this.g1+this.g2+1)/2),~~(8*(this.b1+this.b2+1)/2)]}return this._avg},contains:function(e){var t=e[0]>>3;return gval=e[1]>>3,bval=e[2]>>3,t>=this.r1&&t<=this.r2&&gval>=this.g1&&gval<=this.g2&&bval>=this.b1&&bval<=this.b2}},a.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map((function(e){return e.color}))},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,n=0;n<t.size();n++)if(t.peek(n).vbox.contains(e))return t.peek(n).color;return this.nearest(e)},nearest:function(e){for(var t,n,r,a=this.vboxes,o=0;o<a.size();o++)((n=Math.sqrt(Math.pow(e[0]-a.peek(o).color[0],2)+Math.pow(e[1]-a.peek(o).color[1],2)+Math.pow(e[2]-a.peek(o).color[2],2)))<t||void 0===t)&&(t=n,r=a.peek(o).color);return r},forcebw:function(){var e=this.vboxes;e.sort((function(e,t){return n.naturalOrder(n.sum(e.color),n.sum(t.color))}));var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var r=e.length-1,a=e[r].color;a[0]>251&&a[1]>251&&a[2]>251&&(e[r].color=[255,255,255])}},{quantize:function(i,u){if(!i.length||u<2||u>256)return!1;var l=function(t){var n,r,a,o,i=new Array(32768);return t.forEach((function(t){r=t[0]>>3,a=t[1]>>3,o=t[2]>>3,n=e(r,a,o),i[n]=(i[n]||0)+1})),i}(i);l.forEach((function(){0}));var s=function(e,t){var n,a,o,i=1e6,u=0,l=1e6,s=0,f=1e6,d=0;return e.forEach((function(e){n=e[0]>>3,a=e[1]>>3,o=e[2]>>3,n<i?i=n:n>u&&(u=n),a<l?l=a:a>s&&(s=a),o<f?f=o:o>d&&(d=o)})),new r(i,u,l,s,f,d,t)}(i,l),f=new t((function(e,t){return n.naturalOrder(e.count(),t.count())}));function d(e,t){for(var n,r=1,a=0;a<1e3;)if((n=e.pop()).count()){var i=o(l,n),u=i[0],s=i[1];if(!u)return;if(e.push(u),s&&(e.push(s),r++),r>=t)return;if(a++>1e3)return}else e.push(n),a++}f.push(s),d(f,.75*u);for(var c=new t((function(e,t){return n.naturalOrder(e.count()*e.volume(),t.count()*t.volume())}));f.size();)c.push(f.pop());d(c,u-c.size());for(var p=new a;c.size();)p.push(c.pop());return p}}}();e.exports=r.quantize},5353:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=u(n(4)),o=u(n(2)),i=n(5157);n(1);function u(e){return e&&e.__esModule?e:{default:e}}var l=(0,i.getDefaultCountryCode)();function s(e){var t,n=e.countryCode;null!=n&&(l=null!==(t=(0,i.getCountryCodeByAlpha2)(n))&&void 0!==t?t:(0,i.getDefaultCountryCode)())}var f=function(e){var t,n;function a(){return e.apply(this,arguments)||this}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var o=a.prototype;return o.initialize=function(e){null!=e&&(r=e.selectedCountryCode)},o.getState=function(){return{selectedCountryCode:r}},o.getCountryCode=function(){return null!=r?r:l},a}(a.default.PersistedStore);f.persistKey="PhoneStore";var d=new f(o.default,{PHONE_SET_COUNTRY_CODE:function(e){var t=e.countryCode;r=t},CONNECTION_OPEN:s,SET_LOCATION_METADATA:s});t.default=d},5354:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=h;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=c(n(8)),i=c(n(191)),u=n(131),l=n(5355),s=c(n(5356)),f=c(n(5412)),d=c(n(5032));function c(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(e){var t,n=e.alpha2,r=e.countryCode,c=e.forceMode,p=e.label,h=e.error,m=e.className,g=e.required,_=e.value,E=e.setRef,y=e.placeholder,I=e.autoFocus,T=e.maxLength,O=e.spellCheck,N=e.autoComplete,S=e.onChange,A=e.inputClassName,b=a.useState(!1),R=b[0],C=b[1],M=(0,l.shouldShowCountryCodeSelector)(c,_);return v(u.FormItem,{title:p,error:h,className:m,required:g},void 0,v("div",{className:(0,o.default)(d.default.input,f.default.input,A,(t={},t[d.default.error]=null!=h,t[d.default.focused]=R,t))},void 0,v(s.default,{show:M,alpha2:n,countryCode:r}),v(i.default,{name:"email",type:c===l.PhoneOrEmailSelectorForceMode.EMAIL?"email":"text",value:_,inputRef:E,placeholder:y,"aria-label":p,onChange:function(e){var t=(0,l.shouldShowCountryCodeSelector)(c,e)?r:"";S(e,t)},autoComplete:N,autoFocus:I,maxLength:T,spellCheck:O,className:f.default.inputWrapper,inputClassName:f.default.inputField,onFocus:function(){return C(!0)},onBlur:function(){return C(!1)}})))}h.displayName="PhoneOrEmailInput"},5355:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.shouldShowCountryCodeSelector=function(e,t){if(e===r.PHONE)return!0;if(e===r.EMAIL)return!1;if(t.length<3)return!1;return a.test(t)},t.PhoneOrEmailSelectorForceMode=void 0,t.PhoneOrEmailSelectorForceMode=r,function(e){e[e.PHONE=0]="PHONE",e[e.EMAIL=1]="EMAIL"}(r||(t.PhoneOrEmailSelectorForceMode=r={}));var a=/^[-() \d]+$/},5356:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=E;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=h(n(8)),i=n(176),u=n(4),l=h(n(5054)),s=h(n(99)),f=h(n(108)),d=h(n(942)),c=h(n(5150)),p=h(n(5300)),v=h(n(5411));function h(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function E(e){var t=e.show,n=e.alpha2,r=e.countryCode,h=(0,u.useStateFromStores)([s.default],(function(){return s.default.useReducedMotion})),m=a.useRef(null),E=a.useState(0),y=E[0],I=E[1],T=a.useState(!1),O=T[0],N=T[1];a.useEffect((function(){function e(){var e,n;I(t&&null!==(e=null===(n=m.current)||void 0===n?void 0:n.getBoundingClientRect().width)&&void 0!==e?e:0)}return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[t,n,r]);var S=(0,i.useSpring)({width:y+"px",immediate:h,onStart:function(){N(!0)},onRest:function(){N(!1)}});return _(d.default,{position:d.default.Positions.TOP,renderPopout:function(e){return _(p.default,{className:v.default.popout,onClick:function(t){return function(e,t){c.default.setCountryCode(l.default[e]),t()}(t,e.closePopout)}})}},void 0,(function(e){var u;return _("div",{className:(0,o.default)(v.default.outerContainer,(u={},u[v.default.hidden]=!(t||O),u))},void 0,_(i.animated.div,{className:v.default.container,style:S},void 0,a.createElement("div",{className:v.default.innerContainer,ref:m},a.createElement(f.default,g({},e,{className:v.default.countryCode}),n," ",r),_("div",{className:v.default.separator}))))}))}E.displayName="CountrySelector"},5360:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){var t=i.useState(0),n=t[0],r=t[1],o=i.useState(!1),l=o[0],s=o[1],f=i.useState({step:a.INITIALIZING}),c=f[0],p=f[1],v=(0,d.default)(),h=i.useMemo((function(){return new u.default(1500,3e4)}),[]),m=i.useRef();m.current=i.useCallback((function(){p({step:a.INITIALIZING}),v?r((function(e){return e+1})):(M.info("document is not visible, will defer reconnection when document becomes visible."),s(!0))}),[p,r,v,s]);var g=i.useCallback((function(){!function(e){var t=e.current;if(void 0===t)throw new Error("tried to unwrap an undefined value.");return t}(m)()}),[m]);return i.useEffect((function(){v&&l&&c.step===a.INITIALIZING&&(M.info("reconnecting, now that document is visible"),s(!1),r((function(e){return e+1})))}),[c,v,l,s]),i.useEffect((function(){var t=Date.now(),n="wss:"+window.GLOBAL_ENV.REMOTE_AUTH_ENDPOINT+"/?v=1",r=new WebSocket(n);M.info("[0ms] connecting to "+n);var o=function(e){return M.info("["+(Date.now()-t)+"ms] "+e)},i=null,u=null,l=null,s=null,f=!0;function d(){if(null!=i)return i;throw new Error("No key pair set")}var c=function(){p({step:a.INITIALIZING}),h.pending||h.fail(g)},v=function(){f?(f=!1,r.send(JSON.stringify({op:"heartbeat"}))):(o("heartbeat timeout, reconnecting."),r.close(),c())};r.onmessage=function(){var t=R(regeneratorRuntime.mark((function t(n){var i,u,c,m,I,T,O,N,S,A;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=n.data,u=JSON.parse(i),t.t0=u.op,t.next="nonce_proof"===t.t0?5:"pending_remote_init"===t.t0?12:"pending_finish"===t.t0?22:"finish"===t.t0?30:"cancel"===t.t0?39:"hello"===t.t0?42:"heartbeat_ack"===t.t0?46:47;break;case 5:return c=u.encrypted_nonce,t.next=8,(0,E.computeNonceProof)(d(),c);case 8:return m=t.sent,o("computed nonce proof"),r.send(JSON.stringify({op:"nonce_proof",proof:m})),t.abrupt("return");case 12:return h.succeed(),_.ComponentDispatch.dispatch(y.ComponentActions.WAVE_EMPHASIZE),t.next=16,(0,E.publicKeyFingerprint)(d());case 16:if((I=t.sent)===u.fingerprint){t.next=19;break}throw new Error("bad fingerprint "+I+" !== "+u.fingerprint);case 19:return o("handshake complete awaiting remote auth."),p({step:a.PENDING_REMOTE_INIT,fingerprint:I}),t.abrupt("return");case 22:return _.ComponentDispatch.dispatch(y.ComponentActions.WAVE_EMPHASIZE),o("remote auth handshake started, awaiting finish/cancel."),T=u.encrypted_user_payload,t.next=27,(0,E.decodeEncodedUserRecord)(d(),T);case 27:return O=t.sent,p({step:a.PENDING_FINISH,user:O}),t.abrupt("return");case 30:return _.ComponentDispatch.dispatch(y.ComponentActions.WAVE_EMPHASIZE),o("remote auth handshake finished."),N=u.encrypted_token,p({step:a.FINISH}),t.next=36,(0,E.decryptEncodedCiphertext)(d(),N);case 36:return S=t.sent,e(S),t.abrupt("return");case 39:return o("remote auth handshake cancelled."),g(),t.abrupt("return");case 42:return o("got hello, auth timeout="+u.timeout_ms+"ms"),A=u.heartbeat_interval,s=setTimeout((function(){s=null,v(),l=setInterval(v,A)}),Math.floor(A*Math.random())),t.abrupt("return");case 46:f=!0;case 47:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.onopen=R(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.generateRsaKeyPair)();case 2:return i=e.sent,e.next=5,(0,E.serializePublicKey)(i);case 5:return u=e.sent,e.next=8,(0,E.publicKeyFingerprint)(i);case 8:t=e.sent,o("connected, handshaking with fingerprint: "+t),r.send(JSON.stringify({op:"init",encoded_public_key:u}));case 11:case"end":return e.stop()}}),e)}))),r.onclose=function(e){o("disconnected, code: "+e.code+" "+e.reason),c()},r.onerror=function(e){o("disconnected, error: "+e),c()};return function(){o("cleaning up"),r.onopen=function(){return null},r.onmessage=function(){return null},r.onclose=function(){return null},r.onerror=function(){return null},r.close(1e3),h.cancel(),null!=s&&clearTimeout(s),null!=l&&clearInterval(l)}}),[g,e,h,n]),{state:c,cancel:g}}(e.authTokenCallback),n=t.state,r=t.cancel,l=function(e){switch(e){case a.INITIALIZING:case a.PENDING_REMOTE_INIT:return o.QR_CODE;case a.PENDING_FINISH:case a.FINISH:return o.CONFIRM}}(n.step);return i.createElement(i.Fragment,null,A("div",{className:T.default.verticalSeparator}),A(p.default,{fillParent:!0,className:T.default.qrLogin,step:l,steps:[o.QR_CODE,o.CONFIRM]},void 0,A("div",{className:T.default.qrLoginInner},void 0,A(w,{state:n,cancel:r}))))};var r,a,o,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=S();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),u=N(n(117)),l=n(120),s=N(n(5326)),f=N(n(5304)),d=N(n(5361)),c=N(n(22)),p=N(n(5027)),v=N(n(38)),h=N(n(223)),m=n(413),g=N(n(5043)),_=n(109),E=n(5362),y=n(1),I=N(n(7)),T=N(n(5416)),O=N(n(401));function N(e){return e&&e.__esModule?e:{default:e}}function S(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return S=function(){return e},e}function A(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function b(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){b(o,r,a,i,u,"next",e)}function u(e){b(o,r,a,i,u,"throw",e)}i(void 0)}))}}!function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.PENDING_REMOTE_INIT=1]="PENDING_REMOTE_INIT",e[e.PENDING_FINISH=2]="PENDING_FINISH",e[e.FINISH=3]="FINISH"}(a||(a={})),function(e){e[e.QR_CODE=0]="QR_CODE",e[e.CONFIRM=1]="CONFIRM"}(o||(o={}));var C=n(5363),M=new c.default("LoginQRSocket");var P=A("img",{src:C,alt:""});function L(e){var t=e.text,n=void 0===t?"":t,r=i.useState(!1),a=r[0],o=r[1];return i.useEffect((function(){var e=new Image;e.src=C,e.onload=function(){return o(!0)},e.onerror=function(){return o(!0)}}),[]),A("div",{className:T.default.qrCodeContainer},void 0,""!==n&&a?i.createElement(i.Fragment,null,A(s.default,{className:T.default.qrCode,width:160,height:160,text:n}),A("div",{className:T.default.qrCodeOverlay},void 0,P)):A("div",{className:T.default.qrCodeOverlay},void 0,A(h.default,{className:T.default.qrCode,type:h.default.Type.WANDERING_CUBES})))}function w(e){var t=e.state,n=e.cancel;switch(t.step){case a.INITIALIZING:case a.PENDING_REMOTE_INIT:return i.createElement(i.Fragment,null,A(L,{text:t.step===a.PENDING_REMOTE_INIT?"https://discord.com/ra/"+t.fingerprint:""}),A(m.Title,{className:O.default.marginBottom8},void 0,I.default.Messages.LOGIN_WITH_QR),A(m.SubTitle,{},void 0,I.default.Messages.LOGIN_WITH_QR_DESCRIPTION.format()));case a.PENDING_FINISH:var r=t.user;return i.createElement(i.Fragment,null,A(f.default,{className:T.default.qrAvatar,user:r,size:g.default.Sizes.SIZE_120,isMobile:!0,status:l.StatusTypes.ONLINE}),A(m.Title,{className:O.default.marginBottom8},void 0,I.default.Messages.CONFIRM_QR_CHECK_YOUR_PHONE),A(m.SubTitle,{},void 0,I.default.Messages.LOGIN_AS.format({username:r.username+"#"+r.discriminator})),A(v.default,{look:v.default.Looks.BLANK,size:v.default.Sizes.MIN,onClick:n,className:T.default.startOverButton},void 0,I.default.Messages.QR_CODE_LOGIN_START_OVER));case a.FINISH:return A(h.default,{type:h.default.Type.WANDERING_CUBES})}}L.displayName="QrCodeWithOverlay"},5361:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,r.useState)(a()),t=e[0],n=e[1];return(0,r.useEffect)((function(){function e(){n(a())}return window.addEventListener("visibilitychange",e),function(){window.removeEventListener("visibilitychange",e)}}),[n]),t};var r=n(0);function a(){return"undefined"==typeof document||"visible"===document.visibilityState}},5362:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateRsaKeyPair=function(){return window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["decrypt"])},t.serializePublicKey=function(e){return u.apply(this,arguments)},t.publicKeyFingerprint=function(e){return l.apply(this,arguments)},t.sha256Digest=s,t.decryptEncodedCiphertext=p,t.computeNonceProof=function(e,t){return h.apply(this,arguments)},t.decodeEncodedUserRecord=function(e,t){return m.apply(this,arguments)};var r,a=(r=n(143))&&r.__esModule?r:{default:r};function o(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function u(e){o(i,r,a,u,l,"next",e)}function l(e){o(i,r,a,u,l,"throw",e)}u(void 0)}))}}function u(){return(u=i(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey("spki",t.publicKey);case 2:return n=e.sent,e.abrupt("return",btoa(String.fromCharCode.apply(String,new Uint8Array(n))));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(){return(l=i(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.exportKey("spki",t.publicKey);case 2:return n=e.sent,e.abrupt("return",s(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return f.apply(this,arguments)}function f(){return(f=i(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.crypto.subtle.digest("SHA-256",t);case 2:return n=e.sent,e.abrupt("return",btoa(String.fromCharCode.apply(String,new Uint8Array(n))).replace(/\//g,"_").replace(/\+/g,"-").replace(/={1,2}$/,""));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}function c(e,t){return window.crypto.subtle.decrypt({name:"RSA-OAEP"},e.privateKey,t)}function p(e,t){return v.apply(this,arguments)}function v(){return(v=i(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new TextDecoder,e.next=3,c(t,d(n));case 3:return a=e.sent,e.abrupt("return",r.decode(a));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=i(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t,d(n));case 2:return r=e.sent,e.abrupt("return",s(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=i(regeneratorRuntime.mark((function e(t,n){var r,o,i,u,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t,n);case 2:if(n=e.sent,r=/^(\d+):(\d{4}):([a-zA-Z0-9_]+):(.*)$/,null!=(o=n.match(r))){e.next=7;break}throw new Error("Invalid encoded user record.");case 7:return i=o[1],u=o[2],l=o[3],s=o[4],e.abrupt("return",new a.default({id:i,discriminator:u,avatar:"0"===l?null:l,username:s}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},5363:function(e,t,n){e.exports=n.p+"36d4b341723daffd4a372e1b19591da1.png"},5456:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=c(n(929)),i=c(n(228)),u=n(134),l=n(161),s=n(349),f=c(n(5481)),d=c(n(5035));function c(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=(0,l.cssValueToNumber)(d.default.responsiveWidthMobile),g=0,_=1,E={friction:10,tension:130};var y=function(e){return function(t){var n,r;function l(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).anim=new i.default.Value(g),e.state={shouldAnimate:!s.isMobile},e.handleResize=function(){var t=window.innerWidth>m;!e.state.shouldAnimate&&t&&e.anim.setValue(_),e.setState({shouldAnimate:t})},e.handleResizeDebounced=(0,o.default)(e.handleResize,60),e}r=t,(n=l).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var d=l.prototype;return d.componentDidMount=function(){s.isMobile||(window.addEventListener("resize",this.handleResizeDebounced),this.handleResize())},d.componentWillUnmount=function(){clearTimeout(this.timeout),window.removeEventListener("resize",this.handleResizeDebounced)},d.componentWillAppear=function(e){this.state.shouldAnimate?this.animateTo(_,e):e()},d.componentWillEnter=function(e){var t=this;this.state.shouldAnimate?(clearTimeout(this.timeout),this.timeout=setTimeout((function(){return t.animateTo(_,e)}),40)):e()},d.componentWillLeave=function(e){this.state.shouldAnimate?this.animateTo(g,e):e()},d.animateTo=function(e,t){i.default.spring(this.anim,h({toValue:e},E)).start(t)},d.getAnimatedStyle=function(e){return this.state.shouldAnimate?{opacity:this.anim,transform:e?void 0:[{scale:this.anim.interpolate({inputRange:[0,1],outputRange:[1.05,1]})},{translateY:this.anim.interpolate({inputRange:[0,1],outputRange:["-70px","0px"]})},{translateZ:0}]}:null},d.render=function(){var t=this;return v(u.AccessibilityPreferencesContext.Consumer,{},void 0,(function(n){var r=n.reducedMotion;return v(i.default.div,{className:f.default.wrapper,style:t.getAnimatedStyle(r.enabled)},void 0,a.createElement(e,t.props))}))},l}(a.Component)};t.default=y},5457:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=h(n(8)),i=h(n(5458)),u=n(47),l=h(n(5330)),s=n(954),f=h(n(11)),d=n(161),c=n(349),p=n(1),v=h(n(5482));function h(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function g(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var _=(0,d.cssValueToNumber)(v.default.responsiveWidthMobile),E=[p.Routes.LOGIN,p.Routes.LOGIN_HANDOFF,p.Routes.REGISTER,p.Routes.INVITE(""),p.Routes.GIFT_CODE(""),p.Routes.GUILD_TEMPLATE_LOGIN(""),p.Routes.GUILD_TEMPLATE(""),p.Routes.DISABLE_EMAIL_NOTIFICATIONS,p.Routes.BILLING_PREMIUM_SUBSCRIBE,p.Routes.BILLING_PAYMENT_SOURCES_CREATE,p.Routes.BILLING_PAYMENTS,p.Routes.BILLING_PREMIUM_SWITCH_PLAN,p.Routes.BILLING_GUILD_SUBSCRIPTIONS_PURCHASE,p.Routes.VERIFY,p.Routes.AUTHORIZE_IP,p.Routes.RESET,p.Routes.HANDOFF],y=[p.Routes.APP,p.Routes.ACTIVITY,p.Routes.APPLICATION_LIBRARY,p.Routes.APPLICATION_STORE,"/channels/","/welcome/","/settings/",p.Routes.USERS(""),p.Routes.GUILD_MEMBER_VERIFICATION("")];function I(e){return E.some((function(t){return e.startsWith(t)}))}var T=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).handleResize=function(){n.setState({isMobileWidth:window.innerWidth<=_})},n.updateWaveState=function(e){var t=n.state.waveState;n.setState({waveState:Math.max(t,e)})},n.transitionTo=function(e,t){var r=n.state.waveState;I(e)?(0,u.transitionTo)(e,t):n.setState({route:e,extra:t,waveState:Math.max(r,s.WaveStates.FILLING)})},n.replaceWith=function(e){var t=n.state.waveState;I(e)?(0,u.replaceWith)(e):n.setState({route:e,replaceWith:!0,waveState:Math.max(t,s.WaveStates.FILLING)})},n.state={waveState:s.WaveStates.INITIAL,extra:{},replaceWith:!1,route:null,isMobileWidth:window.innerWidth<=_},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var d=r.prototype;return d.componentDidMount=function(){window.addEventListener("resize",this.handleResize)},d.componentWillUnmount=function(){window.removeEventListener("resize",this.handleResize)},d.componentDidUpdate=function(e,t){var n=this.state,r=n.waveState,a=n.replaceWith,o=n.extra,i=n.route;if(n.isMobileWidth===t.isMobileWidth&&r===s.WaveStates.FILLED&&r!==t.waveState&&null!=i){if(function(e){return y.some((function(t){return e.startsWith(t)}))}(i))return a?(0,u.replaceWith)(i):(0,u.transitionTo)(i,o);window.location=i}},d.mobileTransitionTo=function(e,t){if(I(e))(0,u.transitionTo)(e,t);else{var n=null!=t&&null!=t.search?t.search:null;window.location=null==n?e:e+"?"+n}},d.mobileReplaceWith=function(e){I(e)?(0,u.replaceWith)(e):window.location=e},d.renderDefault=function(){var e,t=this,n=this.props,r=n.splash,u=n.children,d=this.state,c=d.waveState,p=null;return null==d.route&&(p=a.Children.map(u,(function(e){return a.cloneElement(e,{transitionTo:t.transitionTo,replaceWith:t.replaceWith})}))),g(l.default,{className:(0,o.default)(v.default.splashBackground,(e={},e[v.default.loggingIn]=c>=s.WaveStates.FILLING,e)),splash:r,waveState:c,showLogo:!f.default.isWindows(),updateWaveState:this.updateWaveState,logoClassName:v.default.logo},void 0,g(i.default,{component:a.Fragment},void 0,p))},d.renderMobile=function(){var e=this;return g(i.default,{component:a.Fragment},void 0,a.Children.map(this.props.children,(function(t){return a.cloneElement(t,{transitionTo:e.mobileTransitionTo,replaceWith:e.mobileReplaceWith})})))},d.render=function(){var e=this.state.isMobileWidth,t=navigator.userAgent.includes("GameLauncher");return e||c.isMobile||t?this.renderMobile():this.renderDefault()},r}(a.Component);T.displayName="AuthWrapper";var O=T;t.default=O},5458:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=n(253),i=(r=n(402))&&r.__esModule?r:{default:r};function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}var f=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.props,t=e.children,n=e.location,r=e.history,u=e.staticContext,f=(e.match,s(e,["children","location","history","staticContext","match"])),d=null,c=null;return a.Children.forEach(t,(function(e){if(null==d&&a.isValidElement(e)){var t=e.props,i=t.component,f=t.render,p=s(t,["component","render"]),v=p.path||p.from;if(null==(d=null!=v?(0,o.matchPath)(n.pathname,l({},p,{path:v})):null))return;p=l({},p,{key:v,location:n,match:d,history:r,staticContext:u}),null!=i?c=a.createElement(i,p):null!=f&&(c=f(p))}})),a.createElement(i.default,f,c)},r}(a.Component);f.displayName="TransitionSwitch";var d=(0,o.withRouter)(f);t.default=d},5467:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(0)),a=n(5046),o=f(n(4)),i=f(n(319)),u=n(934),l=f(n(10)),s=f(n(5065));function f(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}var c=function(e){var t,n;function o(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={isLogoutRequested:t.props.isAuthenticated},t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l=o.prototype;return l.handleHandoff=function(e,t){this.setState({isLogoutRequested:!1},(function(){(0,u.handoffFromApp)(e,t)}))},l.componentDidMount=function(){var e=this,t=this.props.location;if(null!=t){var n=(0,a.parse)(t.search),r=n.handoff_key,o=n.handoff_token;null!=r&&null!=o&&(this.state.isLogoutRequested?i.default.logout(null).finally((function(){e.handleHandoff(r,o)})):this.handleHandoff(r,o))}},l.render=function(){return this.state.isLogoutRequested?null:r.createElement(s.default,this.props)},o}(r.PureComponent);c.displayName="LoginHandoff",c.defaultProps={transitionTo:function(t){return e.location.assign(t)}};var p=o.default.connectStores([l.default],(function(){return{isAuthenticated:l.default.isAuthenticated()}}))(c);t.default=p}).call(this,n(35))},7586:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.NewUserTypes=void 0,t.NewUserTypes=r,function(e){e[e.MARKETING_UNCLAIMED=0]="MARKETING_UNCLAIMED",e[e.INVITE_UNCLAIMED=1]="INVITE_UNCLAIMED",e[e.ORGANIC_REGISTERED=2]="ORGANIC_REGISTERED",e[e.ORGANIC_REGISTERED_GUILD_TEMPLATE=3]="ORGANIC_REGISTERED_GUILD_TEMPLATE"}(r||(t.NewUserTypes=r={}))},7634:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setNewUser=function(e){a.default.wait((function(){return a.default.dispatch({type:o.ActionTypes.NUF_NEW_USER,newUserType:e})}))},t.setNewUserFlowCompleted=function(){a.default.wait((function(){return a.default.dispatch({type:o.ActionTypes.NUF_COMPLETE})}))};var r,a=(r=n(2))&&r.__esModule?r:{default:r},o=n(1)},7739:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=$;var r,a=F(n(0)),o=B(n(8)),i=n(5046),u=F(n(4)),l=n(71),s=B(n(319)),f=B(n(8002)),d=B(n(8443)),c=B(n(1057)),p=F(n(8444)),v=B(n(957)),h=B(n(5273)),m=n(7634),g=n(7586),_=n(5048),E=B(n(10)),y=B(n(1027)),I=B(n(5263)),T=B(n(946)),O=B(n(58)),N=B(n(317)),S=F(n(413)),A=B(n(98)),b=B(n(18)),R=n(109),C=B(n(5302)),M=B(n(5293)),P=F(n(5276)),L=B(n(5294)),w=n(1),D=B(n(7)),k=B(n(6743)),G=B(n(401));function B(e){return e&&e.__esModule?e:{default:e}}function U(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return U=function(){return e},e}function F(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=U();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function j(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}u.default.initialize();var W=/\.$/,H=function(e){return Array.isArray(e)?e.map((function(e){return e.replace(W,"")})).join(". ").trim():e},z=j(P.InviteResolvingHeader,{}),K=j(d.default,{fromRegister:!0}),Y=function(e){var t,n;function r(t){var n;(n=e.call(this,t)||this).dateOfBirthRef=a.createRef(),n._retryTimer=new l.Timeout,n.handleCaptchaVerify=function(e){return n.setState({captchaKey:e},(function(){return n.handleRegister()}))},n.handleGotoLogin=function(){var e=n.state.email,t=n.props,r=t.onLoginStart,a=t.giftCode,o=t.transitionTo,u=t.invite,l=t.guildTemplate,f=t.redirectTo,d=t.isGuest,c=t.location,p=t.closeRegister,v=t.openLogin;if(d)return void 0!==p&&p(),void(void 0!==v&&v());var h,m=null!=c?(0,i.parse)(c.search):{};null!=u?h=w.Routes.INVITE_LOGIN(u.code):null!=a?h=w.Routes.GIFT_CODE_LOGIN(a.code):null!=l?h=w.Routes.GUILD_TEMPLATE_LOGIN(l.code):null!=f?(h=w.Routes.LOGIN,m.redirect_to=f):(h=w.Routes.LOGIN,""!==e&&(m={email:e})),s.default.loginReset(),o(h,{search:(0,i.stringify)(m)}),null!=r&&r(),R.ComponentDispatch.dispatch(w.ComponentActions.WAVE_EMPHASIZE)},n.handleSubmit=function(e){e&&e.preventDefault(),n.handleRegister()},n.handleBirthdayChange=function(e){n.setState({parsedDateOfBirth:e})};var r=null!=t.location?(0,i.parse)(t.location.search):{};return n.state={email:r.email||"",username:"",password:"",parsedDateOfBirth:null,captchaKey:null,consent:!t.consentRequired,consentRequiredProp:t.consentRequired,isRateLimited:!1},n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var u,f,d,E=r.prototype;return E.hasConsent=function(){var e=this.props.consentRequired,t=this.state.consent;return null!=e&&t},E.componentDidMount=function(){this.redirectIfAuthenticated();var e=this.props,t=e.giftCodeSKU,n=e.invite;b.default.track(w.AnalyticEvents.REGISTER_VIEWED,x({location:null!=n?"Invite Register Page":"Non-Invite Register Page",registration_source:this.registrationSource},null!=t?(0,v.default)(t,!1,!1):{}),{flush:!0}),null==this.props.consentRequired&&s.default.getLocationMetadata(),(0,_.trackAppUIViewed)("register")},E.componentWillUnmount=function(){this._retryTimer.stop()},r.getDerivedStateFromProps=function(e,t){var n=e.consentRequired;return null==t.consentRequiredProp&&null!=n?{consent:!n,consentRequiredProp:n}:{consentRequiredProp:n}},E.componentDidUpdate=function(e,t){var n=this,r=this.props,a=r.apiErrors,o=r.authenticated,i=this.state.parsedDateOfBirth;e.apiErrors===a&&t.parsedDateOfBirth===i||(this.hasError("email")?null!=this.emailRef&&this.emailRef.focus():this.hasError("username")?null!=this.usernameRef&&this.usernameRef.focus():this.hasError("password")?null!=this.passwordRef&&this.passwordRef.focus():null==this.state.parsedDateOfBirth?null!=this.dateOfBirthRef.current&&this.dateOfBirthRef.current.focus():this.hasError("retry_after")&&(this.setState({isRateLimited:!0}),this._retryTimer.start(1e3*this.props.apiErrors.retry_after,(function(){n.setState({isRateLimited:!1})})))),o&&!e.authenticated&&this.redirectIfAuthenticated()},E.redirectIfAuthenticated=function(){var e=this.props,t=e.authenticated,n=e.transitionTo,r=e.redirectTo;t&&((0,m.setNewUser)(g.NewUserTypes.ORGANIC_REGISTERED),n(null!=r?r:I.default.defaultRoute))},E.handleRegister=function(){var e=this.state,t=e.email,n=e.username,r=e.password,a=e.captchaKey,o=e.consent,i=e.parsedDateOfBirth,u=this.props,l=u.invite,s=u.guildTemplate,f=u.giftCode,d=u.consentRequired,c=u.onRegister,v=null!=l?l.code:null,h=null!=f?f.skuId:null;if(null!==d&&(null!=l||null!=i)){R.ComponentDispatch.dispatch(w.ComponentActions.WAVE_EMPHASIZE);var m=null!=l?(0,p.default)({username:n,consent:o,invite:v,giftCodeSKUId:h,captchaKey:a}):(0,p.registerFull)({email:t,username:n,consent:o,password:r,invite:v,guildTemplateCode:null==s?void 0:s.code,giftCodeSKUId:h,captchaKey:a,birthday:i});m.catch((function(){return null})),c&&m.then(c)}},E.hasError=function(e){return null!=this.props.apiErrors[e]},E.renderConsentComponents=function(){var e=this,t=this.state.consent,n=null,r=null;return this.props.consentRequired?r=j(O.default,{className:G.default.marginTop20,align:O.default.Align.CENTER},void 0,j(T.default,{value:t,type:T.default.Types.INVERTED,onChange:function(t,n){return e.setState({consent:n})},className:k.default.checkbox},void 0,j(S.SubText,{},void 0,D.default.Messages.TERMS_PRIVACY_OPT_IN.format({termsURL:w.MarketingURLs.TERMS,privacyURL:w.MarketingURLs.PRIVACY})))):n=j(S.SubText,{className:G.default.marginTop20},void 0,D.default.Messages.TERMS_PRIVACY.format({termsURL:w.MarketingURLs.TERMS,privacyURL:w.MarketingURLs.PRIVACY})),{subText:n,consentText:r}},E.renderInviteResolving=function(){var e=this,t=this.props.authBoxClassName;return j(S.default,{className:t},void 0,z,j(S.Block,{className:G.default.marginTop40},void 0,j(A.default,{},void 0,D.default.Messages.FORM_LABEL_USERNAME),j(N.default,{text:D.default.Messages.AUTH_USERNAME_TOOLTIP,position:N.default.Positions.RIGHT,color:N.default.Colors.BRAND},void 0,(function(t){var n=t.onMouseEnter,r=t.onMouseLeave;return j(S.Input,{autoFocus:!0,className:G.default.marginBottom8,name:"username",value:e.state.username,placeholder:D.default.Messages.FORM_PLACEHOLDER_USERNAME,onChange:function(t){return e.setState({username:t})},onMouseEnter:n,onMouseLeave:r})})),j(S.Button,{className:G.default.marginTop20,disabled:!0},void 0,D.default.Messages.CONTINUE),j(S.Button,{look:S.Button.Looks.LINK,disabled:!0,className:G.default.marginTop8},void 0,D.default.Messages.ALREADY_HAVE_ACCOUNT),j(S.SubText,{disabled:!0,className:G.default.marginTop20},void 0,D.default.Messages.TERMS_PRIVACY.format({termsURL:w.MarketingURLs.TERMS,privacyURL:w.MarketingURLs.PRIVACY}))))},E.renderInvite=function(){var e=this,t=this.props,n=t.invite,r=t.registering,o=t.consentRequired,i=t.authBoxClassName,u=t.apiErrors.username,l=this.state.consent,s=this.renderConsentComponents(),f=s.subText,d=s.consentText,c=j(N.default,{text:!l&&o?D.default.Messages.TERMS_PRIVACY_OPT_IN_TOOLTIP:null},void 0,(function(t){return a.createElement("div",x({className:G.default.marginTop20},t),j(S.Button,{type:"submit",submitting:r,disabled:!e.hasConsent()},void 0,D.default.Messages.CONTINUE))}));return j(S.default,{onSubmit:this.handleSubmit,tag:"form",className:i},void 0,j(P.default,{invite:n}),j(S.Block,{className:G.default.marginTop40},void 0,j(A.default,{error:H(u)},void 0,D.default.Messages.FORM_LABEL_USERNAME),j(N.default,{text:D.default.Messages.AUTH_USERNAME_TOOLTIP,position:N.default.Positions.RIGHT,color:N.default.Colors.BRAND},void 0,(function(t){var n=t.onMouseEnter,r=t.onMouseLeave;return j(S.Input,{autoFocus:!0,className:G.default.marginBottom8,name:"username",value:e.state.username,placeholder:D.default.Messages.FORM_PLACEHOLDER_USERNAME,onChange:function(t){return e.setState({username:t})},error:null!=u?"":null,onMouseEnter:n,onMouseLeave:r})})),d,c,j(S.Button,{look:S.Button.Looks.LINK,onClick:this.handleGotoLogin,className:G.default.marginTop8},void 0,D.default.Messages.ALREADY_HAVE_ACCOUNT),f))},E.renderErrorMessage=function(){var e=this.props.apiErrors.message,t=this.state.isRateLimited;return null!=e&&t?j(S.SubText,{className:(0,o.default)(G.default.marginTop20,k.default.errorMessage)},void 0,e):null},E.renderFull=function(e,t){var n=this,r=this.state,i=r.email,u=r.username,l=r.password,s=r.consent,f=r.parsedDateOfBirth,d=this.props,p=d.registering,v=d.consentRequired,h=d.isGuest,m=d.authBoxClassName,g=d.apiErrors,_=(g=void 0===g?{}:g).email,E=g.username,y=g.password,I=g.date_of_birth,T=this.renderConsentComponents(),O=T.subText,A=T.consentText,b=this.renderErrorMessage(),R=j(N.default,{text:!s&&v?D.default.Messages.TERMS_PRIVACY_OPT_IN_TOOLTIP:null},void 0,(function(e){return a.createElement("div",x({className:G.default.marginTop20},e),j(S.Button,{type:"submit",submitting:p,disabled:!n.hasConsent()||n.state.isRateLimited},void 0,D.default.Messages.CONTINUE))})),C=h?null:null!=e?e():j(S.Title,{},void 0,D.default.Messages.REGISTER_TITLE),M=j(S.Block,{className:G.default.marginTop20},void 0,j(S.Input,{autoFocus:!0,label:D.default.Messages.FORM_LABEL_EMAIL,className:G.default.marginBottom20,name:"email",value:i,onChange:function(e){return n.setState({email:e})},error:H(_),type:"email",setRef:function(e){n.emailRef=e}}),j(S.Input,{label:D.default.Messages.FORM_LABEL_USERNAME,className:G.default.marginBottom20,name:"username",value:u,onChange:function(e){return n.setState({username:e})},error:H(E),setRef:function(e){n.usernameRef=e}}),j(S.Input,{label:D.default.Messages.FORM_LABEL_PASSWORD,name:"password",value:l,onChange:function(e){return n.setState({password:e})},error:H(y),type:"password",setRef:function(e){n.passwordRef=e}}),a.createElement(c.default,{label:D.default.Messages.AGE_GATE_YOUR_BIRTHDAY,wrapperClassName:G.default.marginTop20,name:"date_of_birth",onChange:this.handleBirthdayChange,ref:this.dateOfBirthRef,error:H(I),value:f}),A,R,b,j(S.Button,{look:S.Button.Looks.LINK,onClick:this.handleGotoLogin,className:G.default.marginTop8},void 0,D.default.Messages.ALREADY_HAVE_ACCOUNT),O);return t?j(L.default,{onSubmit:this.handleSubmit,tag:"form",className:(0,o.default)(m,k.default.horizontalAuthBox)},void 0,(function(){return[C,j("div",{className:k.default.flex},void 0,j(S.Title,{className:k.default.createAccountTemplateHeader},void 0,D.default.Messages.REGISTER_TITLE),M)]})):j(S.default,{onSubmit:this.handleSubmit,tag:"form",className:m},void 0,C,M)},E.render=function(){var e=this.props,t=e.isGuest,n=e.authBoxClassName,r=e.isUnderage,a=e.apiErrors,o=a.captcha_service,i=a.captcha_sitekey;if(r||this.hasError("date_of_birth"))return K;if(this.hasError("captcha_key"))return j(C.default,{authBoxClassName:n,onVerify:this.handleCaptchaVerify,title:t?null:D.default.Messages.REGISTER_TITLE,captchaService:o,sitekey:i});var u=this.props,l=u.invite,s=u.giftCode,f=u.guildTemplate;if(null!=l)return l.state===w.InviteStates.RESOLVING?this.renderInviteResolving():this.renderInvite();var d=j(h.default,{guildTemplate:f});if(null!=f)return this.renderFull((function(){return d}),!0);var c=j(M.default,{giftCode:s});return null!=s?this.renderFull((function(){return c})):this.renderFull()},u=r,(f=[{key:"registrationSource",get:function(){var e=this.props,t=e.giftCode,n=e.guildTemplate,r=e.invite;return null!=t?"gift":null!=n?"guild_template":null!=r?null!=r.guild?"guild_invite":"dm_invite":null}}])&&V(u.prototype,f),d&&V(u,d),r}(a.PureComponent);function $(e){var t={consentRequired:(0,u.useStateFromStores)([y.default],(function(){return y.default.getAuthenticationConsentRequired()})),registering:(0,u.useStateFromStores)([E.default],(function(){return E.default.getRegisterStatus()===w.RegistrationStates.REGISTERING})),apiErrors:(0,u.useStateFromStores)([E.default],(function(){return E.default.getErrors()})),authenticated:(0,u.useStateFromStores)([E.default],(function(){return E.default.isAuthenticated()})),isUnderage:(0,u.useStateFromStores)([f.default],(function(){return f.default.isUnderageAnonymous()}))};return a.createElement(Y,x({},e,t))}Y.displayName="Register",Y.defaultProps={giftCodeResolved:!1,transitionTo:function(t){return e.location.assign(t)}},$.displayName="ConnectedRegister"}).call(this,n(35))},7926:function(e,t,n){e.exports=n.p+"4b25b64915cb0e74934b6b749445def2.svg"},8002:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(n(935)),a=l(n(4)),o=l(n(2)),i=l(n(11)),u=n(668);n(1);function l(e){return e&&e.__esModule?e:{default:e}}var s=null;var f=new(function(e){var t,n;function a(){return e.apply(this,arguments)||this}return n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,a.prototype.isUnderageAnonymous=function(){return i.default.embedded?null!=s&&s+u.AGE_GATE_REGISTER_TIMEOUT_MS>Date.now():null!=r.default.parse(document.cookie).underage},a}(a.default.Store))(o.default,{AGE_GATE_PREVENT_UNDERAGE_REGISTRATION:function(e){return!0,s=Date.now(),void(document.cookie="underage=1;path=/")},LOGIN_SUCCESS:function(e){return!1,s=null,void(document.cookie="underage=1;path=/;max-age=0")}});t.default=f},8237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=s(n(137)),a=s(n(968)),o=s(n(1094)),i=s(n(1044)),u=s(n(963)),l=n(1);function s(e){return e&&e.__esModule?e:{default:e}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d=f({},u.default,{openNativeAppModal:function(e){a.default.openNativeAppModal(e,l.RPCCommands.GUILD_TEMPLATE_BROWSER)},openMobileApp:function(e,t){if(!(null!=platform.ua&&platform.ua.toLowerCase().indexOf("googlebot")>-1)){var n=(0,o.default)("template",{queryString:r.default.stringify({fingerprint:t}),guildTemplateCode:e});i.default.launch(n,(function(){}))}}});t.default=d},8443:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;p(n(0));var r,a=n(47),o=d(n(38)),i=p(n(413)),u=d(n(132)),l=n(1),s=d(n(7)),f=d(n(6742));function d(e){return e&&e.__esModule?e:{default:e}}function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function v(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var h=function(){return(0,a.transitionTo)(l.Routes.LOGIN)},m=function(e){var t=e.authBoxClassName,r=e.underageMessage,a=e.fromRegister;return v(i.default,{className:t},void 0,v("img",{alt:"",src:n(7926),className:f.default.img}),v(i.Title,{className:f.default.title},void 0,s.default.Messages.AGE_GATE_UNDERAGE_HEADER),v(i.SubTitle,{className:f.default.subtitle},void 0,a?s.default.Messages.AGE_GATE_UNDERAGE_BODY_POST_REGISTER_MESSAGE:s.default.Messages.AGE_GATE_UNDERAGE_BODY.format({underageMessage:r||s.default.Messages.AGE_GATE_UNDERAGE_BODY_DEFAULT_MESSAGE,helpURL:u.default.getArticleURL(l.HelpdeskArticles.AGE_GATE)})),v(o.default,{fullWidth:!0,onClick:h},void 0,s.default.Messages.AGE_GATE_UNDERAGE_BACK_TO_LOGIN))};m.displayName="AgeGateUnderage";var g=m;t.default=g},8444:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerPhone=function(e){return h.apply(this,arguments)},t.registerDeferred=function(e){a.default.dispatch({type:s.ActionTypes.REGISTER_SAVE_FORM,form:e})},t.default=function(e){var t=e.invite,n=void 0===t?null:t,r=e.giftCodeSKUId,a=void 0===r?null:r,o=e.captchaKey,i=void 0===o?null:o;return m(c({},function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,["invite","giftCodeSKUId","captchaKey"]),{invite:n,giftCodeSKUId:a,captchaKey:i}))},t.registerFull=m;var r=d(n(9)),a=d(n(2)),o=d(n(172)),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}n.default=e,t&&t.set(e,n);return n}(n(1056)),u=d(n(10)),l=d(n(1089)),s=n(1);function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function d(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t,n,r,a,o,i){try{var u=e[o](i),l=u.value}catch(e){return void n(e)}u.done?t(l):Promise.resolve(l).then(r,a)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){p(o,r,a,i,u,"next",e)}function u(e){p(o,r,a,i,u,"throw",e)}i(void 0)}))}}function h(){return(h=v(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.phone,e.prev=1,e.next=4,r.default.post({url:s.Endpoints.REGISTER_PHONE,body:{phone:n},oldFormErrors:!0});case 4:return e.abrupt("return",e.sent);case 7:throw e.prev=7,e.t0=e.catch(1),i=new o.default(e.t0),a.default.dispatch({type:s.ActionTypes.REGISTER_FAILURE,error:i}),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function m(e){var t=e.email,n=e.phoneToken,f=e.username,d=e.consent,c=e.password,p=e.guildTemplateCode,v=e.birthday,h=e.invite,m=void 0===h?null:h,g=e.giftCodeSKUId,_=void 0===g?null:g,E=e.captchaKey,y=void 0===E?null:E,I=e.multiStep,T=void 0!==I&&I;return a.default.dispatch({type:s.ActionTypes.REGISTER,birthday:T?v:null}),null!=v&&(0,l.default)(v,s.AnalyticsSections.REGISTER),r.default.post({url:s.Endpoints.REGISTER,body:{fingerprint:u.default.getFingerprint(),email:t,username:f,password:c,invite:m,consent:d,phone_token:n,date_of_birth:null==v?void 0:v.format("YYYY-MM-DD"),gift_code_sku_id:_,guild_template_code:p,captcha_key:y},oldFormErrors:!0}).then((function(e){a.default.dispatch({type:s.ActionTypes.REGISTER_SUCCESS,token:e.body.token})}),(function(e){var t=new o.default(e);throw a.default.dispatch({type:s.ActionTypes.REGISTER_FAILURE,error:t}),t.fields.hasOwnProperty("date_of_birth")&&i.preventUnderageRegistration(),e}))}},8468:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(4)),a=o(n(2));n(1);function o(e){return e&&e.__esModule?e:{default:e}}var i=null;var u=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=r.prototype;return a.initialize=function(e){var t;i=null!==(t=null==e?void 0:e.type)&&void 0!==t?t:null},a.getType=function(){return i},a.getState=function(){return{type:i}},r}(r.default.PersistedStore);u.persistKey="nuf";var l=new u(a.default,{NUF_NEW_USER:function(e){var t=e.newUserType;i=t},NUF_COMPLETE:function(e){i=null}});t.default=l},8573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.hash?(0,r.parse)(e.hash):null;if(t&&null!=t.token)return t.token;var n=e.search?(0,r.parse)(e.search):null;if(n&&null!=n.token)return n.token;return null};var r=n(5046)},9155:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(4)),a=i(n(2)),o=n(1);function i(e){return e&&e.__esModule?e:{default:e}}var u={};var l=new(function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.getState=function(e){return u[e]},r}(r.default.Store))(a.default,{NATIVE_APP_MODAL_OPENING:function(e){var t=e.code;u[t]=o.NativeAppStates.OPENING},NATIVE_APP_MODAL_OPENED:function(e){var t=e.code;u[t]=o.NativeAppStates.OPEN},NATIVE_APP_MODAL_OPEN_FAILED:function(e){var t=e.code;u[t]=o.NativeAppStates.OPEN_FAIL}});t.default=l},9156:function(e,t,n){e.exports=n.p+"e0c782560fd96acd7f01fda1f8c6ff24.svg"},9157:function(e,t,n){e.exports=n.p+"375217725f8ad1df6310e6738a7306e4.svg"},9390:function(e,t,n){e.exports=n.p+"17192d3fe939ecf404e8cdd64b340469.svg"},9391:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=_;m(n(0));var r,a=v(n(8)),o=v(n(403)),i=v(n(58)),u=m(n(413)),l=v(n(59)),s=n(1),f=v(n(7)),d=v(n(7253)),c=v(n(952)),p=v(n(401));function v(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function m(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function g(e,t,n,a){r||(r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=a;else if(i>1){for(var u=new Array(i),l=0;l<i;l++)u[l]=arguments[l+3];t.children=u}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function _(e){var t=e.text,r=e.buttonCta,v=e.theme,h=void 0===v?s.ThemeTypes.DARK:v,m=e.onClick;return g(u.default,{theme:h},void 0,g(u.Image,{src:n(10529)}),g(u.Title,{className:(0,a.default)(p.default.marginTop20,p.default.marginBottom8,c.default.flexCenter)},void 0,f.default.Messages.DISCORD_DESC_SHORT),g(u.SubTitle,{className:p.default.marginBottom40},void 0,f.default.Messages.DISCORD_DESC_LONG),g(o.default,{className:d.default.card,type:o.default.Types.CUSTOM},void 0,g("img",{alt:"",className:d.default.cardAccentLeft,src:n(10530)}),g("img",{alt:"",className:d.default.cardAccentRight,src:n(10531)}),g(i.default,{className:d.default.cardContents,direction:i.default.Direction.VERTICAL,align:i.default.Align.STRETCH,grow:0},void 0,g(l.default,{tag:"strong",className:d.default.buttonTitle,size:l.default.Sizes.SIZE_16,style:{color:s.Colors.PRIMARY_DARK_300}},void 0,t),g(u.Button,{className:d.default.button,onClick:m},void 0,r))))}_.displayName="InvalidMobileCodedLink"},9392:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(e){var t,n=null===(t=r.default.os)||void 0===t?void 0:t.family;if("Android"===n||"iOS"===n){var i=u.default.getFingerprint();return(0,o.default)(e,{queryString:(0,a.stringify)({fingerprint:i})})}return"discord://"}(e);s.default.launch(t,(function(e){e||(0,i.replaceWith)(l.default.fallbackRoute)}))};var r=f(n(57)),a=n(5046),o=f(n(1094)),i=n(47),u=f(n(10)),l=f(n(5263)),s=f(n(1044));function f(e){return e&&e.__esModule?e:{default:e}}},9393:function(e,t,n){e.exports=n.p+"bdcfee0c4d9fb22ce3c47b593df14254.svg"},9394:function(e,t,n){e.exports=n.p+"ab4f6c12a1ced9de8b5d279056f21334.svg"}}]);
//# sourceMappingURL=87c8c4abf17eb0108830.js.map