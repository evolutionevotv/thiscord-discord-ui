(this.webpackJsonp=this.webpackJsonp||[]).push([[7],{5049:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTrialOffer=d,t.usePremiumTrialOffer=function(){return d(s.PREMIUM_SUBSCRIPTION_TRIAL_ID)};var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),a=r(4),i=r(71),o=l(r(19)),u=l(r(5269)),s=r(1);function l(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function c(e){return null!=e&&null!=e.expires_at&&Date.now()>Date.parse(e.expires_at)}function d(e){var t=(0,a.useStateFromStores)([u.default],(function(){return u.default.getUserTrialOffer(e)})),r=n.useState(c(t)),s=r[0],l=r[1],f=(0,a.useStateFromStores)([o.default],(function(){var e;return null===(e=o.default.getNullableCurrentUser())||void 0===e?void 0:e.hasPremiumPerks}));return n.useEffect((function(){var e;if(null!=t&&null!=t.expires_at){e=new i.Timeout;!function r(){var n,a=null!=t.expires_at?Date.parse(t.expires_at)-Date.now():0;null===(n=e)||void 0===n||n.start(a,(function(){!s&&c(t)?l(!0):r()}))}()}return function(){var t;return null===(t=e)||void 0===t?void 0:t.stop()}}),[s,t]),s||f?null:t}},5132:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=p(r(9)),a=p(r(25)),i=p(r(2)),o=p(r(5327)),u=p(r(18)),s=r(167),l=p(r(962)),f=r(421),c=r(1),d=p(r(7));function p(e){return e&&e.__esModule?e:{default:e}}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e,t){void 0===t&&(t=null),i.default.dispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_INIT,section:e,subsection:t})}var T={open:function(e,t,r){void 0===e&&(e=null),void 0===t&&(t=null),void 0===r&&(r={openWithoutBackstack:!1}),v(e,t),(0,f.pushLayer)(c.Layers.USER_SETTINGS)},init:v,close:function(){var e=o.default.onClose;i.default.dispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_CLOSE}),null!=e&&e()},setSection:function(e,t){void 0===t&&(t=null),i.default.dirtyDispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_SET_SECTION,section:e,subsection:t})},updateAccount:function(e){i.default.dispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_UPDATE_ACCOUNT,settings:e})},submitComplete:function(){i.default.dispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_COMPLETE})},reset:function(){i.default.dispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_RESET})},saveAccountChanges:function(e,t){var r=this;i.default.dispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_SUBMIT});var o=e.username,f=e.email,p=e.password,v=e.avatar,T=e.newPassword,m=e.discriminator,O=t.close;return(0,l.default)({title:d.default.Messages.TWO_FA_CHANGE_ACCOUNT},(function(e){var t=_({username:o,email:f,password:p,avatar:v,new_password:T},e),r=m?_({},t,{discriminator:m}):_({},t),i=a.default.get(c.DEVICE_TOKEN);null!=c.DEVICE_PUSH_PROVIDER&&null!=i&&(r.push_provider=c.DEVICE_PUSH_PROVIDER,r.push_token=i);var u=a.default.get(c.DEVICE_VOIP_TOKEN);return null!=c.DEVICE_PUSH_VOIP_PROVIDER&&null!=u&&(r.push_voip_provider=c.DEVICE_PUSH_VOIP_PROVIDER,r.push_voip_token=u),n.default.patch({url:c.Endpoints.ME,body:r,oldFormErrors:!0})}),{checkEnabled:!1,hooks:{onEarlyClose:function(){return i.default.dispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_FAILURE,errors:{}})}}}).then((function(e){var t=e.body,n=t.token;return u.default.track(c.AnalyticEvents.USER_AVATAR_UPDATED,{animated:(0,s.hasAnimatedAvatar)(t)}),delete t.token,i.default.dispatch({type:c.ActionTypes.UPDATE_TOKEN,token:n}),i.default.dispatch({type:c.ActionTypes.CURRENT_USER_UPDATE,user:t}),O?r.close():r.submitComplete(),e}),(function(e){return i.default.dispatch({type:c.ActionTypes.USER_SETTINGS_MODAL_SUBMIT_FAILURE,errors:e.body}),e}))}};t.default=T},5269:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r(4)),a=i(r(2));r(1);function i(e){return e&&e.__esModule?e:{default:e}}var o={userTrialOffersFetchedDate:{},userTrialOffers:{}},u=o;var s=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.initialize=function(e){u=e||o},a.getUserTrialOffer=function(e){return u.userTrialOffers[e]},a.hasFetchedOffer=function(e){return null!=u.userTrialOffersFetchedDate[e]},a.shouldFetchOffer=function(e){var t=u.userTrialOffersFetchedDate[e];return null==t||Date.now()-1728e5>t},a.getUnacknowledgedOffers=function(){return Object.values(u.userTrialOffers).filter((function(e){return null==e.expires_at}))},a.getState=function(){return u},n}(n.default.PersistedStore);s.persistKey="UserTrialStore";var l=new s(a.default,{BILLING_USER_TRIAL_OFFER_FETCH_SUCCESS:function(e){var t=e.trialId,r=e.userTrialOffer;null!=r&&(u.userTrialOffers[t]=r),u.userTrialOffersFetchedDate[t]=Date.now()},BILLING_USER_TRIAL_OFFER_ACKNOWLEDGED_SUCCESS:function(e){var t=e.userTrialOffer;u.userTrialOffers[t.trial_id]=t,u.userTrialOffersFetchedDate[t.trial_id]=Date.now()},LOGOUT:function(e){return u.userTrialOffers={},void(u.userTrialOffersFetchedDate={})}});t.default=l},5327:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r(6)),a=s(r(4)),i=s(r(2)),o=s(r(19)),u=r(1);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var c=u.FormStates.CLOSED,d=null,p={},_={},v=null,T=null,m=!1,O=!1,S=null,y=null,E=null;function h(e){var t,r,n=o.default.getCurrentUser();if(null==n)return U();d=e.section||d,null!=e.subsection&&null!=d&&(p[d]=e.subsection),O=!!e.openWithoutBackstack,c=u.FormStates.OPEN,_={},(t={})[u.UserSettingsSections.ACCOUNT]={userId:n.id,username:n.username,discriminator:n.discriminator,email:n.email,avatar:n.avatar,password:"",newPassword:null,claimed:n.isClaimed()},T=f({},v=t),y=e.onClose||null,E=null!==(r=e.analyticsLocation)&&void 0!==r?r:null}function U(){c=u.FormStates.CLOSED,m=!1,v=null,T=null,d=null,p={},y=null,E=null}function I(){c=u.FormStates.OPEN,_={}}var g=new(function(e){var t,r;function a(){return e.apply(this,arguments)||this}r=e,(t=a).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i,s,f,h=a.prototype;return h.initialize=function(){this.waitFor(o.default)},h.hasChanges=function(){return null!=T&&null!=v&&(!(!this.isOpen()&&S!==u.DrawerTabTypes.USER_SETTINGS)&&!n.default.isEqual(T,v))},h.isOpen=function(){return m},h.getSection=function(){return d},h.shouldOpenWithoutBackstack=function(){return O},h.getProps=function(){return{submitting:c===u.FormStates.SUBMITTING,section:d,subsection:null!=p&&null!=d?p[d]:null,settings:T,errors:_,hasChanges:this.hasChanges(),openWithoutBackstack:O,analyticsLocation:E}},i=a,(s=[{key:"onClose",get:function(){return y}}])&&l(i.prototype,s),f&&l(i,f),a}(a.default.Store))(i.default,{USER_SETTINGS_MODAL_OPEN:function(e){m=!0,h(e)},USER_SETTINGS_MODAL_INIT:h,USER_SETTINGS_MODAL_CLOSE:function(e){return U()},LOGOUT:function(e){return U()},USER_SETTINGS_MODAL_SUBMIT:function(e){c=u.FormStates.SUBMITTING},USER_SETTINGS_MODAL_SUBMIT_FAILURE:function(e){if(c!==u.FormStates.SUBMITTING)return!1;c=u.FormStates.OPEN,d=u.UserSettingsSections.ACCOUNT,_=e.errors||{}},USER_SETTINGS_MODAL_SET_SECTION:function(e){d=e.section,null!=e.subsection&&(p[d]=e.subsection)},USER_SETTINGS_MODAL_UPDATE_ACCOUNT:function(e){var t=e.settings;null==T&&(T={});var r=T[u.UserSettingsSections.ACCOUNT];T[u.UserSettingsSections.ACCOUNT]=f({},r,{},t)},USER_SETTINGS_MODAL_SUBMIT_COMPLETE:function(e){return I()},USER_SETTINGS_MODAL_RESET:function(e){return r=o.default.getCurrentUser(),I(),void(r&&((t={})[u.UserSettingsSections.ACCOUNT]={userId:r.id,username:r.username,discriminator:r.discriminator,email:r.email,avatar:r.avatar,password:"",newPassword:null,claimed:r.isClaimed()},T=f({},v=t)));var t,r},DRAWER_SELECT_TAB:function(e){return S=e.tab,null==d&&S===u.DrawerTabTypes.USER_SETTINGS&&h({type:u.ActionTypes.USER_SETTINGS_MODAL_INIT,section:null,subsection:null,openWithoutBackstack:!1})}});t.default=g},7329:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.transformNativeFile=function(e,t){if(e instanceof File)return e;return c(e.data,e.filename,t)},t.makeFile=c,t.classifyFile=function(e){return p(e.name,e.type)},t.classifyFileName=p,t.sizeString=function(e){return n.default.filesize(e)},t.maxFileSize=_,t.anyFileTooLarge=function(e,t){var r=_(t);return Array.from(e).some((function(e){return e.size>r}))};var n=f(r(7746)),a=f(r(6)),i=f(r(57)),o=f(r(24)),u=f(r(19)),s=f(r(118)),l=r(1);function f(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){if(null==t&&(t="unknown",e instanceof Blob))switch(e.type){case"image/png":t+=".png"}if(null==n){e instanceof Blob&&(n=e.type);var a=r(8591);n=n||a.lookup(t)}if("function"!=typeof File||"Microsoft Edge"===i.default.name){var o=new Date,u=0;return null!=e.size&&"number"==typeof e.size?u=e.size:null!=e.byteLength&&"number"==typeof e.byteLength&&(u=e.byteLength),{lastModified:o.getTime(),lastModifiedDate:o,name:t,size:u,type:n}}return new File([e],t,{type:n})}var d=[{reType:/^image\/vnd.adobe.photoshop/,klass:"photoshop"},{reType:/^image\/svg\+xml/,klass:"webcode"},{reType:/^image\//,klass:"image"},{reType:/^video\//,klass:"video"},{reName:/\.pdf$/,klass:"acrobat"},{reName:/\.ae/,klass:"ae"},{reName:/\.sketch$/,klass:"sketch"},{reName:/\.ai$/,klass:"ai"},{reName:/\.(?:rar|zip|7z|tar|tar\.gz)$/,klass:"archive"},{reName:/\.(?:c\+\+|cpp|cc|c|h|hpp|mm|m|json|js|rb|rake|py|asm|fs|pyc|dtd|cgi|bat|rss|java|graphml|idb|lua|o|gml|prl|sls|conf|cmake|make|sln|vbe|cxx|wbf|vbs|r|wml|php|bash|applescript|fcgi|yaml|ex|exs|sh|ml|actionscript)$/,klass:"code"},{reName:/\.(?:txt|rtf|doc|docx|md|pages|ppt|pptx|pptm|key|log)$/,klass:"document"},{reName:/\.(?:xls|xlsx|numbers|csv)$/,klass:"spreadsheet"},{reName:/\.(?:html|xhtml|htm|js|xml|xls|xsd|css|styl)$/,klass:"webcode"},{reName:/\.(?:mp3|ogg|wav|flac)$/,klass:"audio"}];function p(e,t){e=e?e.toLowerCase():"";var r=a.default.find(d,(function(r){return r.reType&&t?r.reType.test(t):!(!r.reName||!e)&&r.reName.test(e)}));return r?r.klass:"unknown"}function _(e){var t=u.default.getCurrentUser(),r=s.default.getUserMaxFileSize(t);if(null==e)return r;var n=o.default.getGuild(e),a=null!=n?l.PremiumGuildLimits[n.premiumTier].fileSize:l.MAX_ATTACHMENT_SIZE;return Math.max(a,r)}},7561:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,t&&t.set(e,r);return r}(r(0)),i=T(r(8)),o=T(r(335)),u=T(r(5132)),s=r(5049),l=T(r(362)),f=T(r(108)),c=T(r(18)),d=r(1),p=T(r(7)),_=T(r(6578)),v=T(r(6530));function T(e){return e&&e.__esModule?e:{default:e}}function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function O(e,t,r,a){n||(n="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=a;else if(o>1){for(var u=new Array(o),s=0;s<o;s++)u[s]=arguments[s+3];t.children=u}if(t&&i)for(var l in i)void 0===t[l]&&(t[l]=i[l]);else t||(t=i||{});return{$$typeof:n,type:e,key:void 0===r?null:""+r,ref:null,props:t,_owner:null}}var S=function(){var e=(0,s.usePremiumTrialOffer)();return O("div",{className:_.default.premiumPromo},void 0,O(f.default,{onClick:function(){c.default.track(d.AnalyticEvents.PREMIUM_PROMOTION_OPENED,{location_page:null,location_section:d.AnalyticsSections.FILE_UPLOAD_POPOUT}),o.default.pop(),u.default.open(d.UserSettingsSections.PREMIUM)},className:_.default.content},void 0,null!=e?p.default.Messages.PREMIUM_UPLOAD_PROMO_TRIAL.format({maxUploadPremium:p.default.Messages.FILE_UPLOAD_LIMIT_PREMIUM_TIER_2}):p.default.Messages.PREMIUM_UPLOAD_PROMO.format({maxUploadPremium:p.default.Messages.FILE_UPLOAD_LIMIT_PREMIUM_TIER_2}),O("img",{alt:"",className:_.default.navArrow,src:r(8020)})))};S.displayName="PremiumPromo";var y=O(S,{}),E=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.render=function(){var e=this.props.promo;return O("div",{className:v.default.uploadModalIn},void 0,O("div",{className:(0,i.default)(v.default.uploadDropModal,v.default.error)},void 0,O("div",{className:v.default.inner},void 0,O("div",{className:v.default.icons},void 0,O("div",{className:v.default.wrapOne},void 0,O("div",{className:(0,i.default)(v.default.icon,v.default.one)})),O("div",{className:v.default.wrapThree},void 0,O("div",{className:(0,i.default)(v.default.icon,v.default.three)})),O("div",{className:v.default.wrapTwo},void 0,O("div",{className:(0,i.default)(v.default.icon,v.default.two)}))),O("div",{className:v.default.title},void 0,this.props.title),O("div",{className:v.default.instructions},void 0,this.props.help),e?y:null)))},n}(a.Component);E.displayName="UploadError",E.modalConfig={backdropStyle:l.default.Styles.DARK,backdropInstant:!0};var h=E;t.default=h},7672:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=p(r(0)),a=c(r(8590)),i=c(r(335)),o=c(r(7561)),u=c(r(96)),s=p(r(7329)),l=c(r(11)),f=c(r(7));function c(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function v(e){var t=["openFile"];e.multiple&&t.push("multiSelections");var r=e.filters;u.default.fileManager.openFiles({properties:t,filters:r},e.maxSize,s.makeFile).then((function(t){null!=(t=t.map((function(e){return s.transformNativeFile(e)})))&&e.onChange({stopPropagation:function(){return null},preventDefault:function(){return null},currentTarget:{files:t}})}),(function(t){if("ETOOLARGE"!==t.code)throw t;i.default.push(o.default,{title:f.default.Messages.UPLOAD_AREA_TOO_LARGE_TITLE,help:f.default.Messages.UPLOAD_AREA_TOO_LARGE_HELP.format({maxSize:s.sizeString(e.maxSize)})})}))}var T=function(e){var t,r;function i(t){var r;return(r=e.call(this,t)||this).setRef=r.setRef.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var o=i.prototype;return o.activateUploadDialogue=function(){if(this._ref)return this._ref.activateUploadDialogue()},o.setRef=function(e){this._ref=e},o.render=function(){return n.createElement(a.default,_({ref:this.setRef,handleNativeClick:v,embedded:l.default.isDesktop()},this.props))},i}(n.Component);T.displayName="FileInput";var m=T;t.default=m},8020:function(e,t,r){e.exports=r.p+"c83861b2303b7ee40c419e9590d57f11.svg"}}]);
//# sourceMappingURL=46ca5aa37b10b256bf3b.js.map